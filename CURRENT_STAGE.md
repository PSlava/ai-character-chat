# SweetSin ‚Äî AI Character Roleplay Chat

## –ë—Ä–µ–Ω–¥

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **–ù–∞–∑–≤–∞–Ω–∏–µ** | SweetSin |
| **–î–æ–º–µ–Ω** | sweetsin.cc (~$10-12/–≥–æ–¥) |
| **–°–ª–æ–≥–∞–Ω EN** | Where fantasy comes alive |
| **–°–ª–æ–≥–∞–Ω RU** | –ì–¥–µ —Ñ–∞–Ω—Ç–∞–∑–∏–∏ –æ–∂–∏–≤–∞—é—Ç |
| **–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ EN** | Where fantasy comes alive. Chat with AI characters ‚Äî no limits, no filters. |
| **–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ RU** | –ì–¥–µ —Ñ–∞–Ω—Ç–∞–∑–∏–∏ –æ–∂–∏–≤–∞—é—Ç. –ò–ò-–ø–µ—Ä—Å–æ–Ω–∞–∂–∏ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤. |
| **–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞** | Rose (rose-500/600/700) ‚Äî —Ä–∞–Ω–µ–µ purple |
| **–ò–∫–æ–Ω–∫–∞** | SVG —Å–µ—Ä–¥—Ü–µ —Å –¥—å—è–≤–æ–ª—å—Å–∫–∏–º–∏ —Ä–æ–∂–∫–∞–º–∏ –∏ —Ö–≤–æ—Å—Ç–æ–º (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Logo.tsx`) |
| **–õ–æ–≥–æ—Ç–∏–ø** | SVG-–∏–∫–æ–Ω–∫–∞ + —Ç–µ–∫—Å—Ç: **Sweet** (–±–µ–ª—ã–π) + **Sin** (rose-500) |
| **Favicon** | SVG favicon –≤ —Ç–æ–º –∂–µ —Å—Ç–∏–ª–µ (`public/favicon.svg`) |

**SEO (index.html):**
- Title: `SweetSin ‚Äî AI Character Chat | Roleplay & Fantasy`
- Meta description: Chat with AI characters without limits. Immersive roleplay, uncensored conversations, and endless fantasy.
- Keywords: AI chat, AI roleplay, character AI alternative, NSFW AI chat, AI companion, uncensored AI, roleplay chatbot, AI girlfriend, AI boyfriend, fantasy chat, AI characters, SweetSin
- Open Graph: title, description, type, site_name

**–†–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏—Å—å –¥–æ–º–µ–Ω—ã (feb 2026):**
- .ai –∑–æ–Ω–∞ (~$50-80/–≥–æ–¥): naughtai.ai, sweetsin.ai, temptai.ai, darkrose.ai, velvetai.ai ‚Äî –≤—Å–µ —Å–≤–æ–±–æ–¥–Ω—ã
- .cc –∑–æ–Ω–∞ (~$10-12/–≥–æ–¥): sweetsin.cc ‚úì, naughtai.cc, darkdesire.cc, temptai.cc, lustai.cc, hotchat.cc ‚Äî –≤—Å–µ —Å–≤–æ–±–æ–¥–Ω—ã
- .fun –∑–æ–Ω–∞ (~$9/–≥–æ–¥): naughtai.fun, darkdesire.fun, sweetsin.fun ‚Äî –≤—Å–µ —Å–≤–æ–±–æ–¥–Ω—ã
- –ó–∞–Ω—è—Ç—ã: lustchat.fun, lustchat.cc, afterdark.cc, spicychat.fun, spicyai.cc

**–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏:**
| –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ | –î–æ–º–µ–Ω | –¢—Ä–∞—Ñ–∏–∫/–º–µ—Å |
|-----------|-------|------------|
| Character.AI | character.ai | ~200M+ |
| CrushOn.AI | crushon.ai | ~100M |
| SpicyChat.AI | spicychat.ai | ~73M |
| JanitorAI | janitor.ai | ~50M+ |
| Candy.AI | candy.ai | ‚Äî |
| Chub.AI | chub.ai | ‚Äî |

## –î–µ–ø–ª–æ–π

### –¢–µ–∫—É—â–∏–π (–æ–±–ª–∞—á–Ω—ã–π)

| –°–µ—Ä–≤–∏—Å | URL | –°—Ç–∞—Ç—É—Å |
|--------|-----|--------|
| Frontend (Vercel) | https://ai-character-chat-murex.vercel.app | –†–∞–±–æ—Ç–∞–µ—Ç |
| Backend (Render) | https://ai-character-chat-vercel.onrender.com | –†–∞–±–æ—Ç–∞–µ—Ç |
| Database (Supabase) | PostgreSQL —á–µ—Ä–µ–∑ connection pooler | –†–∞–±–æ—Ç–∞–µ—Ç |
| GitHub | https://github.com/PSlava/ai-character-chat | main branch |

### VPS-–¥–µ–ø–ª–æ–π (Docker Compose) ‚Äî –†–ê–ë–û–¢–ê–ï–¢

**Production**: `151.245.217.191` (sweetsin.cc) ‚Äî 888MB RAM, Ubuntu 22.04, `WEB_WORKERS=1`
**–¢–µ—Å—Ç–æ–≤—ã–π**: `89.116.31.138` ‚Äî 8GB RAM, —Å—Ç–∞—Ä—ã–π —Å–µ—Ä–≤–µ—Ä (–¥–∞–Ω–Ω—ã–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã)

Docker Compose: 4 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ GitHub webhook.

```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1 ‚Äî –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (—Å–ø—Ä–æ—Å–∏—Ç –∫–ª—é—á–∏):
git clone https://github.com/PSlava/ai-character-chat.git /opt/ai-chat
cd /opt/ai-chat
bash deploy/setup.sh

# –í–∞—Ä–∏–∞–Ω—Ç 2 ‚Äî –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è (–∑–∞—Ä–∞–Ω–µ–µ –∑–∞–ø–æ–ª–Ω–∏—Ç—å .env):
git clone https://github.com/PSlava/ai-character-chat.git /opt/ai-chat
cd /opt/ai-chat
cp .env.example .env
nano .env                    # –∑–∞–ø–æ–ª–Ω–∏—Ç—å API-–∫–ª—é—á–∏
bash deploy/setup.sh --auto

# –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ ‚Äî –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å:
nano .env
docker compose up -d
```

| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ü–æ—Ä—Ç |
|-----------|------------|------|
| postgres | PostgreSQL 16, —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö | 5432 (internal) |
| backend | FastAPI + gunicorn + uvicorn workers | 8000 (internal) |
| nginx | Static frontend + reverse proxy /api ‚Üí backend + uploads | 80, 443 |
| webhook | GitHub webhook ‚Üí auto-deploy | 9000 |

–ê–≤—Ç–æ–¥–µ–ø–ª–æ–π:
- **GitHub Webhook** ‚Äî Flask-—Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 9000, –ø—Ä–∏ push –≤ main ‚Üí `git pull && docker compose build && up -d`
- **Zero-downtime deploy** ‚Äî build images ‚Üí restart backend ‚Üí health check ‚Üí restart nginx (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ)
- **Deploy tracking** ‚Äî —Å—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ—è (deploying/done/failed/timeout) —Å exit_code –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
- **Health endpoint** ‚Äî `GET :9000/health` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç commit, started_at, last_deploy (status, exit_code, finished_at)
- **Docker compose v2 + buildx** ‚Äî standalone –±–∏–Ω–∞—Ä–Ω–∏–∫–∏ –≤ webhook-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- **Same-path mount** ‚Äî webhook –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–Ω—Ç–∏—Ä—É–µ—Ç —Ä–µ–ø–æ –ø–æ —Ç–æ–º—É –∂–µ –ø—É—Ç–∏ —á—Ç–æ –∏ –Ω–∞ —Ö–æ—Å—Ç–µ (`HOST_REPO_DIR:HOST_REPO_DIR`), —á—Ç–æ–±—ã build context –∏ volume paths —Å–æ–≤–ø–∞–¥–∞–ª–∏ –¥–ª—è Docker daemon
- **SSL** ‚Äî Certbot (Let's Encrypt) —á–µ—Ä–µ–∑ setup.sh, –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è sweetsin.cc

## Env-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | Render | VPS (.env) | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------|------------|----------|
| DATABASE_URL | Supabase pooler | –ê–≤—Ç–æ (postgres –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä) | PostgreSQL |
| JWT_SECRET | auto-generated | auto-generated | JWT-—Ç–æ–∫–µ–Ω—ã |
| OPENROUTER_API_KEY | –î–∞ | –í—Ä—É—á–Ω—É—é | OpenRouter |
| GROQ_API_KEY | ‚Äî | –í—Ä—É—á–Ω—É—é | Groq |
| CEREBRAS_API_KEY | ‚Äî | –í—Ä—É—á–Ω—É—é | Cerebras |
| DEEPSEEK_API_KEY | ‚Äî | –í—Ä—É—á–Ω—É—é | DeepSeek |
| QWEN_API_KEY | ‚Äî | –í—Ä—É—á–Ω—É—é | Qwen/DashScope |
| TOGETHER_API_KEY | ‚Äî | –í—Ä—É—á–Ω—É—é | Together AI (–ø–ª–∞—Ç–Ω—ã–π, –±–µ–∑ –º–æ–¥–µ—Ä–∞—Ü–∏–∏) |
| ANTHROPIC_API_KEY | –î–∞ | –í—Ä—É—á–Ω—É—é | Claude (–Ω—É–∂–Ω—ã –∫—Ä–µ–¥–∏—Ç—ã) |
| OPENAI_API_KEY | –î–∞ | –í—Ä—É—á–Ω—É—é | GPT (–Ω—É–∂–Ω—ã –∫—Ä–µ–¥–∏—Ç—ã) |
| GEMINI_API_KEY | –î–∞ | –í—Ä—É—á–Ω—É—é | Gemini (–∫–≤–æ—Ç–∞=0) |
| DEFAULT_MODEL | auto | –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π | –ú–æ–¥–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (auto = –≤—Å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã) |
| AUTO_PROVIDER_ORDER | groq,cerebras,openrouter | –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π | –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –¥–ª—è auto-fallback |
| ADMIN_EMAILS | ‚Äî | –í—Ä—É—á–Ω—É—é | –°–ø–∏—Å–æ–∫ email-–æ–≤ –∞–¥–º–∏–Ω–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é) |
| PROXY_URL | –î–∞ | –í—Ä—É—á–Ω—É—é | HTTP –ø—Ä–æ–∫—Å–∏ |
| RESEND_API_KEY | ‚Äî | –í—Ä—É—á–Ω—É—é | Resend API –∫–ª—é—á (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–µ—Ä–µ–¥ SMTP) |
| RESEND_FROM_EMAIL | ‚Äî | SweetSin <noreply@sweetsin.cc> | Email –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è —á–µ—Ä–µ–∑ Resend |
| SMTP_HOST | ‚Äî | –í—Ä—É—á–Ω—É—é | SMTP —Å–µ—Ä–≤–µ—Ä (fallback –µ—Å–ª–∏ –Ω–µ—Ç Resend) |
| SMTP_PORT | ‚Äî | 587 | SMTP –ø–æ—Ä—Ç |
| SMTP_USER | ‚Äî | –í—Ä—É—á–Ω—É—é | SMTP –ª–æ–≥–∏–Ω |
| SMTP_PASSWORD | ‚Äî | –í—Ä—É—á–Ω—É—é | SMTP –ø–∞—Ä–æ–ª—å |
| SMTP_FROM_EMAIL | ‚Äî | –í—Ä—É—á–Ω—É—é | Email –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è —á–µ—Ä–µ–∑ SMTP |
| FRONTEND_URL | ‚Äî | http://localhost:5173 | URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–¥–ª—è —Å—Å—ã–ª–æ–∫ –≤ email) |
| WEB_WORKERS | ‚Äî | 2 | –ö–æ–ª-–≤–æ gunicorn workers (1 –¥–ª—è —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å –º–∞–ª—ã–º RAM) |
| CORS_ORIGINS | ‚Äî | * | CORS (–ø–æ —É–º–æ–ª—á. `*`, –º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å —á–µ—Ä–µ–∑ env) |
| UPLOAD_DIR | ‚Äî | data/uploads | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ |
| MAX_AVATAR_SIZE | ‚Äî | 4194304 | –ú–∞–∫—Å. —Ä–∞–∑–º–µ—Ä –∞–≤–∞—Ç–∞—Ä–∞ –≤ –±–∞–π—Ç–∞—Ö (4 –ú–ë) |
| GOOGLE_CLIENT_ID | ‚Äî | –í—Ä—É—á–Ω—É—é | Google OAuth Client ID |
| GOOGLE_CLIENT_SECRET | ‚Äî | –í—Ä—É—á–Ω—É—é | Google OAuth Client Secret |
| DOMAIN | ‚Äî | –í—Ä—É—á–Ω—É—é | –î–æ–º–µ–Ω –¥–ª—è SSL |
| POSTGRES_PASSWORD | ‚Äî | auto-generated | –ü–∞—Ä–æ–ª—å PostgreSQL |
| WEBHOOK_SECRET | ‚Äî | auto-generated | GitHub webhook secret |
| HOST_REPO_DIR | ‚Äî | /opt/ai-chat | –ü—É—Ç—å –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é –Ω–∞ —Ö–æ—Å—Ç–µ (–¥–ª—è webhook same-path mount) |

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Ä–æ–ª–∏
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ª–æ–≥–∏–Ω –ø–æ email/–ø–∞—Ä–æ–ª—å
- **Google OAuth** ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Google –∞–∫–∫–∞—É–Ω—Ç (authlib):
  - `GET /api/auth/google` ‚Üí Google consent ‚Üí callback ‚Üí JWT ‚Üí redirect –Ω–∞ `/auth/oauth-callback`
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –ø–æ email
  - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å `oauth_provider`/`oauth_id`
  - `password_hash` nullable –¥–ª—è OAuth-only –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –§—Ä–æ–Ω—Ç–µ–Ω–¥: –∫–Ω–æ–ø–∫–∞ ¬´–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google¬ª –Ω–∞ AuthPage, OAuthCallbackPage –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–æ–∫–µ–Ω–∞
- **–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è username** –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (`user_XXXXXX`), –º–æ–∂–Ω–æ —Å–º–µ–Ω–∏—Ç—å –≤ –ø—Ä–æ—Ñ–∏–ª–µ
- JWT-—Ç–æ–∫–µ–Ω—ã (7 –¥–Ω–µ–π) —Å —Ä–æ–ª—å—é, bcrypt —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: admin –∏ user
- **ADMIN_EMAILS** ‚Äî –∞–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–∏ admin –ø–æ email (–ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ)
- **–ê–¥–º–∏–Ω-—Ä–æ–ª—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∏–∑ –ë–î** (–Ω–µ —Ç–æ–ª—å–∫–æ –∏–∑ JWT) –≤ `require_admin`
- **–ë–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** ‚Äî –ø–æ–ª–µ `is_banned` –Ω–∞ User, –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ (403 "Account is banned"), –æ—à–∏–±–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —á–µ—Ä–µ–∑ middleware
- **–†–µ–¥–∏—Ä–µ–∫—Ç –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ** ‚Äî –≤—Å–µ –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø—Ä–æ—Ñ–∏–ª—å, —á–∞—Ç, —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ) —Ä–µ–¥–∏—Ä–µ–∫—Ç—è—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é –ø—Ä–∏ logout
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (`get_current_user_optional`) –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –∏ —Ä–æ–ª–∏ –≤ localStorage
- **Anti-bot –∑–∞—â–∏—Ç–∞** (–±–µ–∑ CAPTCHA, 5 —Å–ª–æ—ë–≤):
  - **Honeypot** ‚Äî —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ `website`, –±–æ—Ç—ã –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω—è—é—Ç ‚Üí 400 "Registration failed"
  - **Proof-of-Work** ‚Äî SHA256 challenge (difficulty=4, ~100ms –≤ –±—Ä–∞—É–∑–µ—Ä–µ), –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π, TTL 5–º–∏–Ω
  - **Rate limit —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏** ‚Äî 3/—á–∞—Å –Ω–∞ IP
  - **–ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–æ–æ–±—â–µ–Ω–∏–π** ‚Äî –º–∏–Ω–∏–º—É–º 5—Å –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
  - **–í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤** ‚Äî 2—Å –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –±–µ–∑ Accept-Language/Referer
- **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è** ‚Äî –ø–æ–ª–Ω—ã–π —Ñ–ª–æ—É:
  - `POST /api/auth/forgot-password` ‚Äî –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –æ—Ç–≤–µ—Ç (–Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ email –≤ –ë–î)
  - JWT-based reset token (1 —á–∞—Å, –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π ‚Äî –ø—Ä–∏–≤—è–∑–∞–Ω –∫ —Ö–µ—à—É –ø–∞—Ä–æ–ª—è)
  - **–û—Ç–ø—Ä–∞–≤–∫–∞ email**: 3-—É—Ä–æ–≤–Ω–µ–≤—ã–π fallback ‚Äî Resend API ‚Üí SMTP (Gmail) ‚Üí –∫–æ–Ω—Å–æ–ª—å (dev-—Ä–µ–∂–∏–º)
  - `POST /api/auth/reset-password` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞, —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è
  - –§—Ä–æ–Ω—Ç–µ–Ω–¥: ¬´–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?¬ª –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ª–æ–≥–∏–Ω–∞, –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/auth/reset-password?token=...`
  - Rate limiting: 3/5–º–∏–Ω –Ω–∞ IP + 10/—á–∞—Å –Ω–∞ IP (–∞–Ω—Ç–∏-–ø–µ—Ä–µ–±–æ—Ä) + 1/2–º–∏–Ω –Ω–∞ email (–∞–Ω—Ç–∏-—Å–ø–∞–º)
  - –§—Ä–æ–Ω—Ç–µ–Ω–¥: 2-–º–∏–Ω—É—Ç–Ω—ã–π —Ç–∞–π–º–µ—Ä –∫—É–ª–¥–∞—É–Ω–∞ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏, –∫–Ω–æ–ø–∫–∞ ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ¬ª –ø–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è

### –ü–µ—Ä—Å–æ–Ω–∞–∂–∏
- –ü–æ–ª–Ω—ã–π CRUD: —Å–æ–∑–¥–∞–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ (—Å cascade –Ω–∞ —á–∞—Ç—ã)
- **–ê–¥–º–∏–Ω –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
- –ö–∞—Ç–∞–ª–æ–≥ –ø—É–±–ª–∏—á–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π —Å –ø–æ–∏—Å–∫–æ–º –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Ç–µ–≥–∞–º
- **–ü–∞–≥–∏–Ω–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞** ‚Äî 15 –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É, –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º —Å —É–º–Ω—ã–º–∏ –Ω–æ–º–µ—Ä–∞–º–∏ (1 ... 3 4 5 ... 12)
- **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏** ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ —Ç–µ–∫—É—â–µ–º —è–∑—ã–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (JSONB `message_counts`)
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ –≤–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü—É –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π (—á–∞—Ç—ã, –ª–∞–π–∫–∏), **username —Å–æ–∑–¥–∞—Ç–µ–ª—è –∫–∞–∫ @username**
- **–ò–∑–±—Ä–∞–Ω–Ω–æ–µ (–ª–∞–π–∫–∏)** ‚Äî –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞—è –∏–∫–æ–Ω–∫–∞ ‚ù§Ô∏è –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö –∏ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞; –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫—Ä–∞—Å–Ω—ã–º –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏; optimistic update —á–µ—Ä–µ–∑ Zustand store; —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/favorites` —Å grid –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö; –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞
- –†–µ–π—Ç–∏–Ω–≥ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (SFW / Moderate / NSFW)
- **NSFW-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π** ‚Äî –º–æ–¥–µ–ª–∏ –±–µ–∑ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ NSFW –æ—Ç–∫–ª—é—á–µ–Ω—ã –≤ UI –∏ –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ auto-selection
- **–í–Ω–µ—à–Ω–æ—Å—Ç—å (Appearance)** ‚Äî –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –≤–Ω–µ—à–Ω–æ—Å—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (–≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ system prompt)
- **–®–∞–±–ª–æ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** ‚Äî `{{char}}` –∏ `{{user}}` –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö –¥–∏–∞–ª–æ–≥–æ–≤ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ–≥–∏** ‚Äî 33 –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ç–µ–≥–∞ –≤ 5 –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö (–ø–æ–ª, —Ä–æ–ª—å, —Ö–∞—Ä–∞–∫—Ç–µ—Ä, —Å–µ—Ç—Ç–∏–Ω–≥, —Å—Ç–∏–ª—å –æ—Ç–≤–µ—Ç–æ–≤). –ö–∞–∂–¥—ã–π —Ç–µ–≥ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–≤–æ–π –ø—Ä–æ–º–ø—Ç-—Å–Ω–∏–ø–ø–µ—Ç –≤ system prompt. –ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ pills –≤ —Ñ–æ—Ä–º–µ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–î–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ: –∫–æ—Ä–æ—Ç–∫–∏–π / —Å—Ä–µ–¥–Ω–∏–π / –¥–ª–∏–Ω–Ω—ã–π / –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π
- **–ú–∞–∫—Å. —Ç–æ–∫–µ–Ω–æ–≤** ‚Äî –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –ª–∏–º–∏—Ç (256‚Äì4096, –¥–µ—Ñ–æ–ª—Ç 2048)
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –∏–∑ —Ç–µ–∫—Å—Ç–∞** ‚Äî –≤—Å—Ç–∞–≤–ª—è–µ—à—å —Ä–∞—Å—Å–∫–∞–∑, AI —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–æ—Ñ–∏–ª—å
- **–ò–º–ø–æ—Ä—Ç –∏–∑ SillyTavern** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ JSON character card (v1/v2) –≤ —Ñ–æ—Ä–º–∞—Ç–µ SillyTavern/TavernAI; –º–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π (personality‚Üídescription, tagline‚Üípersonality, greeting‚Üífirst_mes), SweetSin-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–ª—è –≤ `extensions.sweetsin`
- **–≠–∫—Å–ø–æ—Ä—Ç –≤ SillyTavern** ‚Äî `GET /api/characters/{id}/export` —Å–∫–∞—á–∏–≤–∞–µ—Ç JSON character card v2 (`spec: "chara_card_v2"`) —Å Content-Disposition header
- **–í—ã–±–æ—Ä AI-–º–æ–¥–µ–ª–∏** ‚Äî OpenRouter, Groq, Cerebras, Together + –ø—Ä—è–º—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (DeepSeek, Qwen)
- **API —Ä–µ–µ—Å—Ç—Ä–∞ –º–æ–¥–µ–ª–µ–π** ‚Äî `GET /api/models/{openrouter,groq,cerebras,together}`
- **API —Ä–µ–µ—Å—Ç—Ä–∞ —Ç–µ–≥–æ–≤** ‚Äî `GET /api/characters/structured-tags` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ç–µ–≥–∏ –¥–ª—è —Ñ–æ—Ä–º—ã
- **–ê–≤—Ç–æ–ø–µ—Ä–µ–≤–æ–¥ –∫–∞—Ä—Ç–æ—á–µ–∫** ‚Äî –∏–º–µ–Ω–∞, tagline –∏ —Ç–µ–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–≤–æ–¥—è—Ç—Å—è LLM –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –Ω–∞ –¥—Ä—É–≥–æ–º —è–∑—ã–∫–µ (batch, —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ JSONB)
- **–°—á—ë—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ —è–∑—ã–∫–∞–º** ‚Äî –∞—Ç–æ–º–∞—Ä–Ω—ã–π –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç JSONB `message_counts` –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ (–∫—Ä–æ–º–µ –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–π)
- **–ë–∞–∑–æ–≤—ã–µ —Å—á—ë—Ç—á–∏–∫–∏ (social proof)** ‚Äî JSONB –ø–æ–ª—è `base_chat_count` –∏ `base_like_count` –Ω–∞ Character: `{"ru": 345, "en": 567}`. Seed-–ø–µ—Ä—Å–æ–Ω–∞–∂–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ (100‚Äì1000 —á–∞—Ç–æ–≤, 50‚Äì100 –ª–∞–π–∫–æ–≤). –û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç `real + base[lang]`, –∞–¥–º–∏–Ω –≤–∏–¥–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ –≤ –∑–µ–ª—ë–Ω–æ–º

### –ü–µ—Ä—Å–æ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–µ—Ä—Å–æ–Ω—ã** ‚Äî –¥–æ 10 –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –ª–∏—á–Ω–æ—Å—Ç–µ–π –¥–ª—è —Ä–æ–ª–µ–≤—ã—Ö —á–∞—Ç–æ–≤
- CRUD: —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π
- –ö–∞–∂–¥–∞—è –ø–µ—Ä—Å–æ–Ω–∞ –∏–º–µ–µ—Ç –∏–º—è –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —á–∞—Ç–∞ —Å –ø–µ—Ä—Å–æ–Ω–æ–π ‚Äî –∏–º—è –ø–µ—Ä—Å–æ–Ω—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–æ display name –¥–ª—è `{{user}}`
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —á–∞—Ç—É —á–µ—Ä–µ–∑ `persona_id` (FK –Ω–∞ Chat)
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–µ—Ä—Å–æ–Ω—ã ‚Äî —á–∞—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å (`persona_id` ‚Üí NULL)
- HTML-—Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π

### –ê–≤—Ç–æ–ø–µ—Ä–µ–≤–æ–¥ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- **Batch-–ø–µ—Ä–µ–≤–æ–¥ –∫–∞—Ä—Ç–æ—á–µ–∫ —á–µ—Ä–µ–∑ LLM** ‚Äî name, tagline, tags –¥–æ 15 –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∑–∞ –æ–¥–∏–Ω –≤—ã–∑–æ–≤ Groq/Cerebras/OpenRouter
- **–ü–µ—Ä–µ–≤–æ–¥ –æ–ø–∏—Å–∞–Ω–∏–π** ‚Äî personality, scenario, appearance, greeting_message –ø–µ—Ä–µ–≤–æ–¥—è—Ç—Å—è per-character –∫–∞–∫ plain text (–∫–∞–∂–¥–æ–µ –ø–æ–ª–µ –æ—Ç–¥–µ–ª—å–Ω—ã–º LLM-–≤—ã–∑–æ–≤–æ–º, –±–µ–∑ JSON ‚Äî –Ω–∞–¥—ë–∂–Ω–µ–µ –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤ —Å –∫–∞–≤—ã—á–∫–∞–º–∏ –∏ –ø–µ—Ä–µ–Ω–æ—Å–∞–º–∏)
- **–ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∏–º—ë–Ω**: —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ ‚Üí —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è (–ê–ª–∏–Ω–∞ ‚Üí Alina), –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ ‚Üí –ø–µ—Ä–µ–≤–æ–¥ (–¢—ë–º–Ω—ã–π –õ–æ—Ä–¥ ‚Üí Dark Lord), —Å–º–µ—à–∞–Ω–Ω—ã–µ ‚Üí –∫–æ–º–±–∏–Ω–∞—Ü–∏—è (–ö–Ω—è–∑—å –í–ª–∞–¥–∏–º–∏—Ä ‚Üí Prince Vladimir)
- **JSONB –∫—ç—à** ‚Äî `translations` –ø–æ–ª–µ –Ω–∞ Character: `{"en": {"name": "...", "tagline": "...", "tags": [...], "personality": "...", "scenario": "...", "appearance": "...", "greeting_message": "..."}}`
- **–ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞** ‚Äî –±—ç–∫–µ–Ω–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–≤–∫–ª—é—á–∞—è personality), —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –∑–Ω–∞–µ—Ç –æ –ø–µ—Ä–µ–≤–æ–¥–µ
- **Fire-and-forget —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** ‚Äî –ø–µ—Ä–µ–≤–æ–¥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ —á–µ—Ä–µ–∑ `asyncio.create_task()`, –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç
- **–°–±—Ä–æ—Å –∫—ç—à–∞** ‚Äî –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ name/tagline/personality/scenario/appearance/greeting_message –∫—ç—à –æ—á–∏—â–∞–µ—Ç—Å—è
- **Fallback** ‚Äî –ø—Ä–∏ –æ—à–∏–±–∫–µ –ø–µ—Ä–µ–≤–æ–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—Ä–∏–≥–∏–Ω–∞–ª
- **Rate limit** ‚Äî 60 –≤—ã–∑–æ–≤–æ–≤/–º–∏–Ω (–≥–ª–æ–±–∞–ª—å–Ω—ã–π), provider fallback Groq ‚Üí Cerebras ‚Üí OpenRouter
- **Warmup-—Å–∫—Ä–∏–ø—Ç** (`warmup_translations.py`) ‚Äî –¥–≤—É—Ö–ø—Ä–æ—Ö–æ–¥–Ω—ã–π –ø—Ä–æ–≥—Ä–µ–≤ –∫—ç—à–∞: Pass 1 ‚Äî batch-–ø–µ—Ä–µ–≤–æ–¥ –∫–∞—Ä—Ç–æ—á–µ–∫ (15 —à—Ç/–±–∞—Ç—á), Pass 2 ‚Äî per-character –æ–ø–∏—Å–∞–Ω–∏—è (3—Å –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 8 —è–∑—ã–∫–æ–≤ (en, ru, es, fr, de, ja, zh, ko)

### –ß–∞—Ç
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —á–∞—Ç—ã —Å –æ–¥–Ω–∏–º –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º** ‚Äî –∫–Ω–æ–ø–∫–∞ ¬´–ù–æ–≤—ã–π —á–∞—Ç¬ª –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –∏ –≤ —à–∞–ø–∫–µ —á–∞—Ç–∞; `force_new: true` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —á–∞—Ç–∞ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –ø–æ–∏—Å–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ
- **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —á–∞—Ç–æ–≤** ‚Äî sidebar –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç —á–∞—Ç—ã –ø–æ –ø–µ—Ä—Å–æ–Ω–∞–∂—É, –Ω—É–º–µ—Ä–∞—Ü–∏—è `#N` –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —á–∞—Ç–æ–≤
- SSE-—Å—Ç—Ä–∏–º–∏–Ω–≥ –æ—Ç–≤–µ—Ç–æ–≤ (—Ç–æ–∫–µ–Ω –∑–∞ —Ç–æ–∫–µ–Ω–æ–º)
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –æ–∫–Ω–æ (sliding window, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Ä–∞–∑–º–µ—Ä: 4K/8K/16K/‚àû)
- **System prompt (–ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç):**
  - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–ª–∏–Ω–µ –æ—Ç–≤–µ—Ç–∞ (short/medium/long/very_long)
  - **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ–≥–∏** ‚Äî –ø—Ä–æ–º–ø—Ç-—Å–Ω–∏–ø–ø–µ—Ç—ã –º–µ–∂–¥—É personality –∏ appearance
  - **–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø—Ä–æ–∑—ã** ‚Äî –Ω–∞—Ä—Ä–∞—Ç–∏–≤ –æ–±—ã—á–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º, –¥–∏–∞–ª–æ–≥–∏ —á–µ—Ä–µ–∑ —Ç–∏—Ä–µ (ru) / –∫–∞–≤—ã—á–∫–∏ (en), `*–∑–≤—ë–∑–¥–æ—á–∫–∏*` –¢–û–õ–¨–ö–û –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –º—ã—Å–ª–µ–π
  - **–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Ñ–æ—Ä–º–∞—Ç–∞** –≤ –ø—Ä–æ–º–ø—Ç–µ ‚Äî –º–æ–¥–µ–ª–∏ —Å–ª–µ–¥—É—é—Ç –ø—Ä–∏–º–µ—Ä–∞–º –ª—É—á—à–µ, —á–µ–º –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º
  - **–ù–∞—Ä—Ä–∞—Ç–∏–≤ –æ—Ç —Ç—Ä–µ—Ç—å–µ–≥–æ –ª–∏—Ü–∞** ‚Äî ¬´–æ–Ω–∞ —Å–∫–∞–∑–∞–ª–∞¬ª, –∞ –Ω–µ ¬´—è —Å–∫–∞–∑–∞–ª–∞¬ª; –ø—Ä–∞–≤–∏–ª–æ –≤ intro, format_rules –∏ rules
  - Show-don't-tell, —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –æ—â—É—â–µ–Ω–∏—è, –∞–Ω—Ç–∏-—à–∞–±–ª–æ–Ω–Ω–æ—Å—Ç—å, –∑–∞–ø—Ä–µ—Ç –ø–æ–≤—Ç–æ—Ä–æ–≤
  - **–ê–Ω—Ç–∏-–ø–æ–≤—Ç–æ—Ä –ø—Ä–∞–≤–∏–ª–∞** (–Ω–∞ 3 —è–∑—ã–∫–∞—Ö: ru/en/es): –∑–∞–ø—Ä–µ—Ç —ç—Ö–æ/–ø–µ—Ä–µ—Å–∫–∞–∑–∞ —Å–ª–æ–≤ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –Ω–æ–≤–æ–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –≤ –∫–∞–∂–¥–æ–º –æ—Ç–≤–µ—Ç–µ, –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ —Å—é–∂–µ—Ç–∞ –≤–ø–µ—Ä—ë–¥, –∑–∞–ø—Ä–µ—Ç —Å–ª–æ–≤-–∫–æ—Å—Ç—ã–ª–µ–π (¬´—á—É–≤—Å—Ç–≤—É—è¬ª, ¬´–ø–æ–Ω–∏–º–∞—è¬ª, ¬´–æ—Å–æ–∑–Ω–∞–≤–∞—è¬ª / "feeling", "realizing", "understanding")
  - –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –º–µ–∂–¥—É –Ω–∞—Ä—Ä–∞—Ç–∏–≤–æ–º, –¥–∏–∞–ª–æ–≥–æ–º –∏ –º—ã—Å–ª—è–º–∏
- **–õ–µ–Ω–∏–≤–∞—è –ø–æ–¥–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π** ‚Äî –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ 20, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ –≤–≤–µ—Ä—Ö (infinite scroll)
- **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏** ‚Äî –∫–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç `model_used` (–Ω–∞–ø—Ä. `openrouter:google/gemma-3-27b-it:free`)
- **–ü–æ–∫–∞–∑ –º–æ–¥–µ–ª–∏ –¥–ª—è –∞–¥–º–∏–Ω–∞** ‚Äî –ø–æ–¥ –∫–∞–∂–¥—ã–º –æ—Ç–≤–µ—Ç–æ–º –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ (10px —Å–µ—Ä—ã–π —Ç–µ–∫—Å—Ç, —Ç–æ–ª—å–∫–æ –¥–ª—è admin)
- –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î
- **–£–¥–∞–ª–µ–Ω–∏–µ —á–∞—Ç–æ–≤** ‚Äî –ø–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –Ω–∞ –≥–ª–∞–≤–Ω—É—é
- **–û—á–∏—Å—Ç–∫–∞ —á–∞—Ç–∞** ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–∫—Ä–æ–º–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è), —á–∞—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ
- **–£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π** (–∫—Ä–æ–º–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ)
- **–ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞** ‚Äî –∫–Ω–æ–ø–∫–∞ –Ω–∞ hover + –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –ø–æ–¥ –ø–æ—Å–ª–µ–¥–Ω–∏–º –æ—Ç–≤–µ—Ç–æ–º
- **–û—à–∏–±–∫–∏ –≤ —á–∞—Ç–µ** ‚Äî –∫—Ä–∞—Å–Ω—ã–µ –±–∞–±–ª—ã; –æ–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç ¬´–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏¬ª, –∞–¥–º–∏–Ω—ã ‚Äî –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç; –æ—à–∏–±–∫–∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–Ω—ã –≤—Å–µ–º
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏** ‚Äî –º–æ–¥–∞–ª–∫–∞ ¬´–ú–æ–¥–µ–ª—å –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏¬ª —Å:
  - –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ (–∫–∞—Ä—Ç–æ—á–∫–∏ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏: OpenRouter / Groq / Cerebras / Together / –ü—Ä—è–º–æ–π API / –ü–ª–∞—Ç–Ω—ã–µ)
  - Temperature (0‚Äì2), Top-P (0‚Äì1), Top-K (0‚Äì100)
  - Frequency penalty (0‚Äì2, **–¥–µ—Ñ–æ–ª—Ç 0.3**), Presence penalty (0‚Äì2)
  - –ú–∞–∫—Å. —Ç–æ–∫–µ–Ω–æ–≤ (256‚Äì4096)
  - **–ü–∞–º—è—Ç—å** (–∫–æ–Ω—Ç–µ–∫—Å—Ç): 4K / 8K / 16K / ‚àû
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ localStorage **per-model** (`model-settings:{modelId}`), –º–æ–¥–µ–ª—å per-chat (`chat-model:{chatId}`). –ü—Ä–∏ —Å–º–µ–Ω–µ –º–æ–¥–µ–ª–∏ –≤ –º–æ–¥–∞–ª–∫–µ ‚Äî —Å–ª–∞–π–¥–µ—Ä—ã –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è –Ω–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —ç—Ç–æ–π –º–æ–¥–µ–ª–∏
- **–°–º–µ–Ω–∞ –º–æ–¥–µ–ª–∏ mid-chat** ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î –Ω–∞ —á–∞—Ç–µ
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è ID —Å–æ–æ–±—â–µ–Ω–∏–π** ‚Äî —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ UUID –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∏–∑ –ë–î (–≤ —Ç.—á. –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö)
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è thinking-—Ç–æ–∫–µ–Ω–æ–≤** ‚Äî `<think>...</think>` –±–ª–æ–∫–∏ –≤—ã—Ä–µ–∑–∞—é—Ç—Å—è –∏–∑ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞ (Qwen3, DeepSeek R1)
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏–µ—Ä–æ–≥–ª–∏—Ñ–æ–≤** ‚Äî CJK/–≤—å–µ—Ç–Ω–∞–º—Å–∫–∏–µ —Å–∏–º–≤–æ–ª—ã –≤ –æ—Ç–≤–µ—Ç–µ ‚Üí retry —Å –¥—Ä—É–≥–æ–π –º–æ–¥–µ–ª—å—é (Qwen artifact). `has_foreign_chars()` –≤ `thinking_filter.py`
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–¥–º–µ—à–∏–≤–∞–Ω–∏—è —è–∑—ã–∫–æ–≤** ‚Äî 2+ –ª–∞—Ç–∏–Ω—Å–∫–∏—Ö —Å–ª–æ–≤–∞ –≤ ru/es —Ç–µ–∫—Å—Ç–µ ‚Üí retry. `has_mixed_languages()` –≤ `thinking_filter.py`
- **–°—á—ë—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π/—á–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** ‚Äî –∞—Ç–æ–º–∞—Ä–Ω—ã–π –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç `message_count` –∏ `chat_count` –Ω–∞ User –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏/–Ω–æ–≤–æ–º —á–∞—Ç–µ
- **Markdown —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥** ‚Äî react-markdown + rehype-sanitize –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ (bold, italic, code, —Å–ø–∏—Å–∫–∏, blockquote). –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è ‚Äî plain text
- **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π** ‚Äî –∫–Ω–æ–ø–∫–∞ Copy –Ω–∞ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ (clipboard + toast)
- **Auto-resize textarea** ‚Äî –ø–æ–ª–µ –≤–≤–æ–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Ç—ë—Ç –ø–æ –≤—ã—Å–æ—Ç–µ (–æ—Ç 1 —Å—Ç—Ä–æ–∫–∏ –¥–æ 192px max), —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏

### –ê–≤–∞—Ç–∞—Ä—ã
- **–ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–æ–≤** ‚Äî `POST /api/upload/avatar` (multipart, auth required)
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ø—Ä–æ–≤–µ—Ä–∫–∞ Content-Type, magic bytes (JPEG/PNG/WebP/GIF), –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –ª–∏–º–∏—Ç (MAX_AVATAR_SIZE, –¥–µ—Ñ–æ–ª—Ç 4 –ú–ë)
- **–û–±—Ä–∞–±–æ—Ç–∫–∞**: Pillow ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è, —Ä–µ—Å–∞–π–∑ –¥–æ 512√ó512, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ WebP (quality=85), EXIF —É–¥–∞–ª—è–µ—Ç—Å—è
- **–•—Ä–∞–Ω–µ–Ω–∏–µ**: `data/uploads/avatars/{uuid}.webp`, UUID-–∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ (–Ω–µ—Ç user-controlled –∏–º—ë–Ω)
- **–†–∞–∑–¥–∞—á–∞**: FastAPI StaticFiles (dev) + nginx location (prod) —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º 30 –¥–Ω–µ–π
- **Docker**: shared volume `uploads` –º–µ–∂–¥—É backend –∏ nginx
- **–§—Ä–æ–Ω—Ç–µ–Ω–¥**: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `AvatarUpload` ‚Äî –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–π –∞–≤–∞—Ç–∞—Ä —Å overlay –∫–∞–º–µ—Ä—ã, –∑–∞–≥—Ä—É–∑–∫–∞, preview
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è
- **–§–æ–Ω –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞** ‚Äî —Ä–∞–∑–º—ã—Ç—ã–π —Ä–∞—Å—Ç—è–Ω—É—Ç—ã–π –∞–≤–∞—Ç–∞—Ä (blur-3xl, opacity-20)
- **–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Ñ–∞–π–ª–æ–≤** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏ –∑–∞–º–µ–Ω–µ –∞–≤–∞—Ç–∞—Ä–∞ (–ø–µ—Ä—Å–æ–Ω–∞–∂ + –ø—Ä–æ—Ñ–∏–ª—å), –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞, –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞
- **–û—á–∏—Å—Ç–∫–∞ —Å–∏—Ä–æ—Ç** ‚Äî `POST /api/admin/cleanup-avatars` —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –¥–∏—Å–∫, —É–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª—ã –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ –ë–î
- **onError fallback** ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Avatar –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª—ã –µ—Å–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å

### –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- **–®–∞–±–ª–æ–Ω—ã –ø—Ä–æ–º–ø—Ç–æ–≤** ‚Äî –∞–¥–º–∏–Ω –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ª—é–±–æ–π –∫—É—Å–æ–∫ system prompt —á–µ—Ä–µ–∑ UI
  - Defaults —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∫–æ–¥–µ (`prompt_builder.py`), overrides ‚Äî –≤ –ë–î (`prompt_templates`)
  - Override –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç –¥–µ—Ñ–æ–ª—Ç; –∫–Ω–æ–ø–∫–∞ ¬´–°–±—Ä–æ—Å–∏—Ç—å¬ª —É–¥–∞–ª—è–µ—Ç override ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –∫ –¥–µ—Ñ–æ–ª—Ç—É
  - In-memory –∫—ç—à (60 —Å–µ–∫ TTL) –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
  - 21 –∫–ª—é—á √ó 3 —è–∑—ã–∫–∞ (ru/en/es): –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ, –ø—Ä–∞–≤–∏–ª–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –¥–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞, —Ñ–æ—Ä–º–∞—Ç —Å –ø—Ä–∏–º–µ—Ä–æ–º, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ–≥–∏, –≤–Ω–µ—à–Ω–æ—Å—Ç—å, –ø—Ä–∞–≤–∏–ª–∞ –∏ –¥—Ä.
  - –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/admin/prompts` —Å —Ç–∞–±–∞–º–∏ RU/EN (ES –ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ –≤ –∫–æ–¥–µ, —Ç–∞–± –≤ UI –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω), expandable –∫–∞—Ä—Ç–æ—á–∫–∏, –º–µ—Ç–∫–∏ ¬´–ò–∑–º–µ–Ω—ë–Ω¬ª/¬´–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é¬ª
- **Seed-–ø–µ—Ä—Å–æ–Ω–∞–∂–∏** ‚Äî 40 –≥–æ—Ç–æ–≤—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –æ—Ç @sweetsin –¥–ª—è –Ω–µ–ø—É—Å—Ç–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞
  - –û—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∞—Ä—Ö–µ—Ç–∏–ø–∞—Ö –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ (SpicyChat, CrushOn, JanitorAI, Chub, WetDreams)
  - **30 —Ñ—ç–Ω—Ç–µ–∑–∏/–∞—Ä—Ö–µ—Ç–∏–ø—ã** (25 NSFW, 5 moderate): –≤–∞–º–ø–∏—Ä, —Å—É–∫–∫—É–±, –º–∞—Ñ–∏—è, —è–Ω–¥–µ—Ä–µ, –ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä, –¥–µ–º–æ–Ω, —Å–æ—Å–µ–¥, —Ü—É–Ω–¥–µ—Ä–µ, CEO, –æ–±–æ—Ä–æ—Ç–µ–Ω—å, –Ω—ç–∫–æ, —Ç—ë–º–Ω–∞—è —ç–ª—å—Ñ–∏–π–∫–∞, —Ñ–µ–º–±–æ–π, —Å–≤–æ–¥–Ω—ã–π –±—Ä–∞—Ç, –∏–Ω–∫—É–±, —è–∫—É–¥–∑–∞, –ø—Ä–∏–∑—Ä–∞–∫, –¥—Ä–∞–∫–æ–Ω, —Å—Ç–∞–ª–∫–µ—Ä-–±—ã–≤—à–∏–π, –∞–Ω–¥—Ä–æ–∏–¥, –¥–æ–º–∏–Ω–∞—Ç—Ä–∏–∫—Å, –±–∞–π–∫–µ—Ä, —ç–ª—å—Ñ-—Ü–µ–ª–∏—Ç–µ–ª—å, sugar mommy, —Ä—ã—Ü–∞—Ä—å, –õ—é—Ü–∏—Ñ–µ—Ä, —Ä–µ–≤–Ω–∏–≤—ã–π –ø–∞—Ä–µ–Ω—å, –≤–µ–¥—å–º–∞, –¥—Ä—É–≥ –¥–µ—Ç—Å—Ç–≤–∞, –ø–∏—Ä–∞—Ç–∫–∞
  - **10 —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –∂–µ–Ω—Å–∫–∏—Ö NSFW** (–±—ã—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏): —Å–æ—Å–µ–¥–∫–∞, —Å–µ–∫—Ä–µ—Ç–∞—Ä—à–∞, –±—ã–≤—à–∞—è –æ–¥–Ω–æ–∫–ª–∞—Å—Å–Ω–∏—Ü–∞, —Ñ–∏—Ç–Ω–µ—Å-—Ç—Ä–µ–Ω–µ—Ä, –ø–æ–ø—É—Ç—á–∏—Ü–∞ –≤ –ø–æ–µ–∑–¥–µ, —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ, –º–∞–º–∏–Ω–∞ –ø–æ–¥—Ä—É–≥–∞, –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–∫–∞, —Å–æ—Å–µ–¥–∫–∞ –ø–æ –∫–≤–∞—Ä—Ç–∏—Ä–µ, –º–∞—Å—Å–∞–∂–∏—Å—Ç–∫–∞
  - DALL-E 3 –∞–≤–∞—Ç–∞—Ä—ã (512√ó512 WebP, ~1.5MB —Å—É–º–º–∞—Ä–Ω–æ) ‚Äî —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `seed_avatars/`
  - –ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –∞–≤–∞—Ç–∞—Ä—ã –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ `data/uploads/avatars/` —Å UUID-–∏–º–µ–Ω–∞–º–∏
  - –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `@sweetsin` (`system@sweetsin.cc`) —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  - `POST /api/admin/seed-characters` ‚Äî –∏–º–ø–æ—Ä—Ç (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ –ø–µ—Ä–µ–¥ –∏–º–ø–æ—Ä—Ç–æ–º, –Ω–µ—Ç –¥—É–±–ª–µ–π)
  - `DELETE /api/admin/seed-characters` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π @sweetsin
  - –ö–Ω–æ–ø–∫–∏ ¬´–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å¬ª / ¬´–£–¥–∞–ª–∏—Ç—å –≤—Å–µ¬ª –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∞–¥–º–∏–Ω–∫–∏
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏** ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/admin/users` —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º:
  - –¢–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: –∞–≤–∞—Ç–∞—Ä, –∏–º—è, email, —Ä–æ–ª—å, –∫–æ–ª-–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π/—á–∞—Ç–æ–≤/–ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π, –¥–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, —Å—Ç–∞—Ç—É—Å
  - –ü–æ–∏—Å–∫ –ø–æ email/username/display_name (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)
  - Ban/Unban ‚Äî toggle —Å optimistic UI (–∑–∞–±–∞–Ω–µ–Ω–Ω—ã–π –Ω–µ –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏, 403)
  - –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî –∫–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö + –∞–≤–∞—Ç–∞—Ä–æ–≤, —Å ConfirmDialog
  - –ù–µ–ª—å–∑—è –∑–∞–±–∞–Ω–∏—Ç—å/—É–¥–∞–ª–∏—Ç—å —Å–µ–±—è
  - –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∏ –≤–º–µ—Å—Ç–æ —Ç–∞–±–ª–∏—Ü—ã
- **–û—á–∏—Å—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤** ‚Äî –∫–Ω–æ–ø–∫–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Å–∏—Ä–æ—Ç—Å–∫–∏—Ö –∞–≤–∞—Ç–∞—Ä–æ–≤ (–Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º)
- **–°–∏—Å—Ç–µ–º–∞ –∂–∞–ª–æ–± (Report)** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∂–∞–ª–æ–≤–∞—Ç—å—Å—è –Ω–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π:
  - `POST /api/characters/{id}/report` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∂–∞–ª–æ–±—ã (–ø—Ä–∏—á–∏–Ω–∞ + –æ–ø–∏—Å–∞–Ω–∏–µ), rate limit 5/—á–∞—Å
  - 5 –ø—Ä–∏—á–∏–Ω: inappropriate, spam, impersonation, underage, other
  - –°—Ç–∞—Ç—É—Å—ã: pending ‚Üí reviewed / dismissed
  - `GET /api/admin/reports?status=` ‚Äî —Å–ø–∏—Å–æ–∫ –∂–∞–ª–æ–± —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –¥–ª—è –∞–¥–º–∏–Ω–∞
  - `PUT /api/admin/reports/{id}` ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
  - –§—Ä–æ–Ω—Ç–µ–Ω–¥: –∫–Ω–æ–ø–∫–∞ Flag (üö©) –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞, ReportModal —Å —Ä–∞–¥–∏–æ-–∫–Ω–æ–ø–∫–∞–º–∏ –ø—Ä–∏—á–∏–Ω
  - –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/admin/reports` —Å —Ç–∞–±–∞–º–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ –∂–∞–ª–æ–±
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ `/admin/analytics`:
  - **–¢—Ä–µ–∫–∏–Ω–≥ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤** ‚Äî `POST /api/analytics/pageview` (–ø—É–±–ª–∏—á–Ω—ã–π, –±–µ–∑ auth, rate limit 60/–º–∏–Ω). –¢—Ä–µ–∫–∞–µ—Ç –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö –∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö. –ê–¥–º–∏–Ω—ã –∏—Å–∫–ª—é—á–µ–Ω—ã
  - **–¢–∞–±–ª–∏—Ü–∞ `page_views`** ‚Äî path, IP-—Ö–µ—à (SHA256 + daily salt, –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å), user_id, device, referrer, language
  - **–î–∞—à–±–æ—Ä–¥** ‚Äî `GET /api/admin/analytics/overview?days=1|7|30|90` (admin only)
  - 6 summary –∫–∞—Ä—Ç–æ—á–µ–∫: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –Ω–æ–≤—ã–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä—ã, —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ, —Å–æ–æ–±—â–µ–Ω–∏—è, —á–∞—Ç—ã
  - CSS bar chart —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ –¥–Ω—è–º (–ø—Ä–æ—Å–º–æ—Ç—Ä—ã + —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ + —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
  - –¢–æ–ø —Å—Ç—Ä–∞–Ω–∏—Ü, –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞, —Ç–æ–ø –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (mobile/desktop/tablet), –º–æ–¥–µ–ª–∏
  - –ê–¥–º–∏–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (page views, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, —Å–æ–æ–±—â–µ–Ω–∏—è, —á–∞—Ç—ã)
  - **GeoIP —Å—Ç—Ä–∞–Ω—ã –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π** ‚Äî –ª–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ DB-IP Lite (MMDB, ~5MB), instant lookup —á–µ—Ä–µ–∑ maxminddb. –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –µ—Å–ª–∏ –±–∞–∑–∞ —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π. –°—Ç—Ä–∞–Ω—ã —Å —Ñ–ª–∞–≥–∞–º–∏ –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ. `country` –∫–æ–ª–æ–Ω–∫–∞ –Ω–∞ `page_views`
- **Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏** ‚Äî –ø—Ä–∏ –Ω–æ–≤–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (email –∏–ª–∏ Google OAuth) –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è email —Å –¥–∞–Ω–Ω—ã–º–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (email, username, –º–µ—Ç–æ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏). Toggle –≤–∫–ª/–≤—ã–∫–ª –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/admin/users` (–∫–Ω–æ–ø–∫–∞ Bell). –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `prompt_templates` –∫–∞–∫ `setting.notify_registration`. –ê–¥–º–∏–Ω—ã –Ω–µ –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–≤–æ–µ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**: `setting.notify_registration` (bool) ‚Äî email –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, `setting.paid_mode` (bool) ‚Äî –ø–ª–∞—Ç–Ω—ã–π —Ä–µ–∂–∏–º LLM
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–¥–º–∏–Ω–∞** ‚Äî API `GET /api/admin/settings` –∏ `PUT /api/admin/settings/{key}` –¥–ª—è key-value –Ω–∞—Å—Ç—Ä–æ–µ–∫ (—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `prompt_templates` —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `setting.`)
- **–ü–ª–∞—Ç–Ω—ã–π —Ä–µ–∂–∏–º (Paid Mode)** ‚Äî –∞–¥–º–∏–Ω-—Ç–æ–≥–≥–ª –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∏–∫–æ–Ω–∫–∞ DollarSign). –ö–æ–≥–¥–∞ –≤–∫–ª—é—á—ë–Ω: auto-fallback –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `["groq", "together"]` (–ø–ª–∞—Ç–Ω—ã–µ, –±–µ–∑ rate limits) –≤–º–µ—Å—Ç–æ `groq ‚Üí cerebras ‚Üí openrouter`. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `setting.paid_mode` —Å 60-—Å–µ–∫—É–Ω–¥–Ω—ã–º in-memory –∫—ç—à–µ–º. UI: –∑–µ–ª—ë–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –∫–æ–≥–¥–∞ –≤–∫–ª, —Å–µ—Ä–∞—è –∫–æ–≥–¥–∞ –≤—ã–∫–ª
- –°—Å—ã–ª–∫–∏ –≤ —Å–∞–π–¥–±–∞—Ä–µ: ¬´–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏¬ª + ¬´–ü—Ä–æ–º–ø—Ç—ã¬ª + ¬´–ñ–∞–ª–æ–±—ã¬ª + ¬´–ê–Ω–∞–ª–∏—Ç–∏–∫–∞¬ª –≤–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—É

### –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫

- **Scheduler** (`autonomous/scheduler.py`) ‚Äî `asyncio.create_task()` –≤ lifespan, hourly check, 24—á –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏. –°–æ—Å—Ç–æ—è–Ω–∏–µ –≤ `prompt_templates` —Å `scheduler.*` –∫–ª—é—á–∞–º–∏. 5 –º–∏–Ω –∑–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π** (`autonomous/character_generator.py`) ‚Äî LLM-driven: 14 –≤–∑–≤–µ—à–µ–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π (~90% NSFW), LLM –∏–∑–æ–±—Ä–µ—Ç–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—É—é –∫–æ–Ω—Ü–µ–ø—Ü–∏—é ‚Üí —Ç–µ–∫—Å—Ç (Groq‚ÜíCerebras‚ÜíOpenRouter) ‚Üí DALL-E 3 –∞–≤–∞—Ç–∞—Ä (512√ó512, WebP, ~$0.04) ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–¥ @sweetsin ‚Üí –∞–≤—Ç–æ-–ø–µ—Ä–µ–≤–æ–¥ EN/ES. –ü—Ä–∏ –æ—à–∏–±–∫–µ ‚Äî email –∞–¥–º–∏–Ω–∞–º
- **–†–æ—Å—Ç —Å—á—ë—Ç—á–∏–∫–æ–≤** (`autonomous/counter_growth.py`) ‚Äî –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π bump `base_chat_count`/`base_like_count` —Å —É—á—ë—Ç–æ–º —è–∑—ã–∫–æ–≤—ã—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π (–¥–∞—Ä–∫-—Ä–æ–º–∞–Ω—Ç–∏–∫–∞ —Ä–∞—Å—Ç—ë—Ç –±—ã—Å—Ç—Ä–µ–µ –¥–ª—è RU, –∞–Ω–∏–º–µ ‚Äî –¥–ª—è EN, —Ä–æ–º–∞–Ω—Ç–∏–∫–∞ ‚Äî –¥–ª—è ES)
- **–Ø–∑—ã–∫–æ–≤—ã–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è** (`characters/language_preferences.py`) ‚Äî —Ç–∞–±–ª–∏—Ü–∞ –∞—Ñ—Ñ–∏–Ω–∏—Ç–∏ –ø–æ —Å–µ—Ç—Ç–∏–Ω–≥–∞–º, —Ç–µ–≥–∞–º, —Ä–µ–π—Ç–∏–Ω–≥—É. –í–ª–∏—è–µ—Ç –Ω–∞ –Ω–∞—á–∞–ª—å–Ω—ã–µ —Å—á—ë—Ç—á–∏–∫–∏ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –Ω–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π —Ä–æ—Å—Ç. –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Ä–∞–∂–∞–µ—Ç –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∞—É–¥–∏—Ç–æ—Ä–∏–∏. Featured ‚Äî –∏–∑ —Ç–æ–ø-5 –ø–æ —Ç–µ–∫—É—â–µ–º—É —è–∑—ã–∫—É
- **–û—á–∏—Å—Ç–∫–∞** (`autonomous/cleanup.py`) ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ `page_views` >90 –¥–Ω–µ–π, orphan avatar —Ñ–∞–π–ª–æ–≤
- –ö–æ–Ω—Ñ–∏–≥: `AUTO_CHARACTER_ENABLED` env (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `true`)

### LLM-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (9 —à—Ç—É–∫)

| –ü—Ä–æ–≤–∞–π–¥–µ—Ä | –ú–æ–¥–µ–ª–∏ | API | –°—Ç–∞—Ç—É—Å |
|-----------|--------|-----|--------|
| **OpenRouter** | 8 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π (auto-fallback) | openrouter.ai/api/v1 | **–†–∞–±–æ—Ç–∞–µ—Ç** |
| **Groq** | 6 –º–æ–¥–µ–ª–µ–π (auto-fallback) | api.groq.com/openai/v1 | **–†–∞–±–æ—Ç–∞–µ—Ç** |
| **Cerebras** | 3 –º–æ–¥–µ–ª–∏ (auto-fallback) | api.cerebras.ai/v1 | **–†–∞–±–æ—Ç–∞–µ—Ç** |
| **Together AI** | 7+ –º–æ–¥–µ–ª–µ–π (auto-fallback) | api.together.xyz/v1 | **–ì–æ—Ç–æ–≤** ‚Äî –ø–ª–∞—Ç–Ω—ã–π, –Ω—É–∂–µ–Ω –∫–ª—é—á |
| **DeepSeek** | deepseek-chat, deepseek-reasoner | api.deepseek.com/v1 | **–ì–æ—Ç–æ–≤** ‚Äî –Ω—É–∂–µ–Ω –∫–ª—é—á |
| **Qwen (DashScope)** | qwen3-32b, qwen3-235b –∏ –¥—Ä. | dashscope-intl.aliyuncs.com | **–ì–æ—Ç–æ–≤** ‚Äî –Ω—É–∂–µ–Ω –∫–ª—é—á |
| Gemini | gemini-2.0-flash | generativelanguage.googleapis.com | –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–∫–≤–æ—Ç–∞=0) |
| Claude | claude-sonnet-4-5 | api.anthropic.com | –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω—É–∂–Ω—ã –∫—Ä–µ–¥–∏—Ç—ã) |
| OpenAI | gpt-4o | api.openai.com | –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω–µ—Ç –∫—Ä–µ–¥–∏—Ç–æ–≤) |

**–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ OpenRouter (—Å –æ—Ü–µ–Ω–∫–æ–π –∫–∞—á–µ—Å—Ç–≤–∞ –¥–ª—è RP):**

| –ú–æ–¥–µ–ª—å | –ö–∞—á–µ—Å—Ç–≤–æ | NSFW | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|--------|----------|------|------------|
| Hermes 3 405B | 9/10 | –î–∞ | –õ—É—á—à–∞—è –¥–ª—è RP |
| Llama 3.3 70B | 8/10 | –î–∞ | –•–æ—Ä–æ—à–∞—è –¥–ª—è RP |
| Gemma 3 27B | 7/10 | –ù–µ—Ç | –°—Ç–∞–±–∏–ª—å–Ω–∞—è, —Å–ª–∞–±—ã–π RP –Ω–∞ —Ä—É—Å—Å–∫–æ–º |
| Gemma 3 12B | 6/10 | –ù–µ—Ç | –ë—ã—Å—Ç—Ä–∞—è |
| DeepSeek R1 | 5/10 | –ù–µ—Ç | –£–º–Ω–∞—è, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–∞—è (>30—Å) |
| Nemotron 9B | 0/10 | –î–∞ | –ò—Å–∫–ª—é—á–µ–Ω–∞ –∏–∑ auto-fallback ‚Äî –º–µ—à–∞–µ—Ç —è–∑—ã–∫–∏ |
| Qwen3 4B | 4/10 | –î–∞ | –ú–∞–ª–µ–Ω—å–∫–∞—è |
| Llama 3.2 3B | 3/10 | –î–∞ | –ú–∞–ª–µ–Ω—å–∫–∞—è |

**–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ Groq (–∞–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ API):**

| –ú–æ–¥–µ–ª—å | –ö–∞—á–µ—Å—Ç–≤–æ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|--------|----------|------------|
| Llama 3.3 70B | 9/10 | –û—Å–Ω–æ–≤–Ω–∞—è |
| Qwen3 32B | 8/10 | –•–æ—Ä–æ—à–∞—è –¥–ª—è RP |
| Llama 4 Scout/Maverick | 7/10 | –ù–æ–≤—ã–µ |
| DeepSeek R1 Distill 70B | 7/10 | Thinking-–º–æ–¥–µ–ª—å |
| GPT-OSS 120B | 6/10 | –°—Ç—Ä–æ–≥–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è, NSFW –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω |
| GPT-OSS 20B | 5/10 | –°—Ç—Ä–æ–≥–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è, NSFW –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω |

**–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ Cerebras (–∞–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ API):**

| –ú–æ–¥–µ–ª—å | –ö–∞—á–µ—Å—Ç–≤–æ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|--------|----------|------------|
| Llama 3.3 70B | 7/10 | –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ penalty ‚Äî –∫–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∏–∂–µ–Ω–æ |
| Qwen 3 32B | 7/10 | –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ penalty ‚Äî –∫–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∏–∂–µ–Ω–æ |
| ZAI GLM 4.7 | 6/10 | ‚Äî |
| GPT-OSS 120B | 5/10 | –°—Ç—Ä–æ–≥–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è, NSFW –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω |

**Cerebras –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `frequency_penalty` / `presence_penalty`. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è. –í UI –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ü–ª–∞—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ Together AI (–∞–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ API):**

| –ú–æ–¥–µ–ª—å | –ö–∞—á–µ—Å—Ç–≤–æ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|--------|----------|------------|
| Llama 4 Maverick | 9/10 | –õ—É—á—à–∞—è –¥–ª—è creative writing |
| Llama 3.3 70B Turbo | 8/10 | –ë—ã—Å—Ç—Ä–∞—è –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è |
| Qwen 3 32B | 7/10 | –ë–µ–∑ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ DashScope |
| Llama 4 Scout | 7/10 | –ù–æ–≤–∞—è |
| DeepSeek V3 / R1 | 6/10 | Reasoning |

**Together AI**: –ø–ª–∞—Ç–Ω—ã–π (pay-per-token, –æ—Ç $0.02/M), OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π. **–ë–µ–∑ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞** ‚Äî Qwen –∏ Llama —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ NSFW-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.

**–†–µ–∂–∏–º—ã –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏:**
- **Auto (–í—Å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã)** ‚Äî –∫—Ä–æ—Å—Å-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–Ω—ã–π fallback: Groq ‚Üí Cerebras ‚Üí OpenRouter (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ —á–µ—Ä–µ–∑ `AUTO_PROVIDER_ORDER`). **Paid mode**: Groq ‚Üí Together (–±–µ–∑ rate limits). –î–µ—Ñ–æ–ª—Ç –¥–ª—è –Ω–æ–≤—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- **Auto (OpenRouter / Groq / Cerebras / Together)** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–±–æ—Ä —Ç–æ–ø-3 –ø–æ –∫–∞—á–µ—Å—Ç–≤—É –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, —Å NSFW-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- **–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –º–æ–¥–µ–ª—å** ‚Äî –≤—ã–±–æ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–Ω–∞–ø—Ä. `groq:llama-3.3-70b-versatile`)
- **–ü—Ä—è–º–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä** (DeepSeek, Qwen) ‚Äî –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ API, –º–∏–Ω—É—è –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä—ã
- **–ê–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–µ—Å—Ç—Ä–æ–≤** ‚Äî –º–æ–¥–µ–ª–∏ Groq, Cerebras –∏ Together –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∏–∑ API –∫–∞–∂–¥—ã–π —á–∞—Å
- **NSFW-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** ‚Äî –º–æ–¥–µ–ª–∏ –±–µ–∑ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ NSFW –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è –∏–∑ auto-selection –¥–ª—è NSFW-–ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- **`last_model_used`** ‚Äî –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã —Å auto-fallback –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç –∫–∞–∫–∞—è –º–æ–¥–µ–ª—å —Ä–µ–∞–ª—å–Ω–æ –æ—Ç–≤–µ—Ç–∏–ª–∞

**–ö—É–ª–¥–∞—É–Ω –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –º–æ–¥–µ–ª–µ–π:**
- –ï—Å–ª–∏ –º–æ–¥–µ–ª—å –≤–µ—Ä–Ω—É–ª–∞ –æ—à–∏–±–∫—É (429, 402, 404, rate limit) ‚Äî –æ–Ω–∞ –∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è –∏–∑ auto-–ø–µ—Ä–µ–±–æ—Ä–∞ –Ω–∞ 15 –º–∏–Ω—É—Ç
- –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —á–µ—Ç—ã—Ä—ë—Ö –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–æ–≤: OpenRouter, Groq, Cerebras, Together
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: `backend/app/llm/model_cooldown.py`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤:**
- Gemma (Google AI Studio) ‚Äî –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `system` role, –º–µ—Ä–¥–∂–∏—Ç—Å—è –≤ `user`
- Nemotron/DeepSeek R1 ‚Äî thinking-–º–æ–¥–µ–ª–∏, –æ—Ç–≤–µ—Ç –≤ –ø–æ–ª–µ `reasoning`/`reasoning_content`
- DeepSeek-reasoner ‚Äî thinking-–º–æ–¥–µ–ª—å, –æ—Ç–≤–µ—Ç –≤ `reasoning_content`
- Venice ‚Äî –Ω–µ—Å—Ç–∞–±–∏–ª–µ–Ω, –≤—Å–µ –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ –Ω–µ–≥–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 429
- **Qwen/DashScope –º–æ–¥–µ—Ä–∞—Ü–∏—è** ‚Äî DashScope –ø—Ä–∏–º–µ–Ω—è–µ—Ç –º–æ–¥–µ—Ä–∞—Ü–∏—é Alibaba (`data_inspection_failed`), –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Å user-friendly —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- –í—Å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç HTTP-–ø—Ä–æ–∫—Å–∏ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π, generation settings (temperature, top_p, top_k, frequency_penalty, presence_penalty)
- **ThinkingFilter** ‚Äî —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä –¥–ª—è `<think>...</think>` –±–ª–æ–∫–æ–≤
- **Render wake-up** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π (free tier –∑–∞—Å—ã–ø–∞–µ—Ç)

### i18n (–∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è)
- –¢—Ä—ë—Ö—ä—è–∑—ã—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: **–∞–Ω–≥–ª–∏–π—Å–∫–∏–π** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), **–∏—Å–ø–∞–Ω—Å–∫–∏–π**, —Ä—É—Å—Å–∫–∏–π
- i18next + react-i18next, ~391 –∫–ª—é—á –Ω–∞ —è–∑—ã–∫
- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–æ–≤ EN | ES | RU –≤ —Ö–µ–¥–µ—Ä–µ –∏ –ø—Ä–æ—Ñ–∏–ª–µ
- –Ø–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ system prompt
- **–ü—Ä–æ–º–ø—Ç—ã –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —è–∑—ã–∫–µ** ‚Äî –ø—Ä–∏ –≤—ã–±–æ—Ä–µ English –≤—Å–µ —á–∞—Å—Ç–∏ system prompt –±–µ—Ä—É—Ç—Å—è –∏–∑ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ –Ω–∞–±–æ—Ä–∞, –≤–∫–ª—é—á–∞—è —Å—Ç—Ä–æ–≥–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ ¬´Write ONLY in English¬ª
- **–ü–µ—Ä–µ–≤–æ–¥ –∫–∞—Ä—Ç–æ—á–µ–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π** ‚Äî name, tagline, tags –ø–µ—Ä–µ–≤–æ–¥—è—Ç—Å—è batch-–∑–∞–ø—Ä–æ—Å–æ–º —á–µ—Ä–µ–∑ LLM (Groq ‚Üí Cerebras ‚Üí OpenRouter), –∫—ç—à–∏—Ä—É—é—Ç—Å—è –≤ JSONB
- **–ü–µ—Ä–µ–≤–æ–¥ –æ–ø–∏—Å–∞–Ω–∏–π –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π** ‚Äî personality, scenario, appearance, greeting_message –ø–µ—Ä–µ–≤–æ–¥—è—Ç—Å—è per-character —á–µ—Ä–µ–∑ LLM (–∫–∞–∂–¥–æ–µ –ø–æ–ª–µ –æ—Ç–¥–µ–ª—å–Ω–æ –∫–∞–∫ plain text), –∫—ç—à–∏—Ä—É—é—Ç—Å—è –≤ JSONB
- **System prompts –Ω–∞ 3 —è–∑—ã–∫–∞—Ö** ‚Äî 21 –∫–ª—é—á √ó 3 —è–∑—ã–∫–∞ (ru/en/es) –≤ prompt_builder.py: –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –ø—Ä–æ–º–ø—Ç–æ–≤ –≤–∫–ª—é—á–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç, –¥–∏–∞–ª–æ–≥–∏, NSFW-–ø—Ä–∞–≤–∏–ª–∞
- **`GET /api/auth/providers`** ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ OAuth-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã, –∫–Ω–æ–ø–∫–∞ Google —Å–∫—Ä—ã—Ç–∞ –µ—Å–ª–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

### –§—Ä–æ–Ω—Ç–µ–Ω–¥
- React + TypeScript + Vite + Tailwind CSS
- –¢—ë–º–Ω–∞—è —Ç–µ–º–∞, **—Ü–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ rose** (–±—Ä–µ–Ω–¥ SweetSin)
- Zustand –¥–ª—è —Å—Ç–µ–π—Ç-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞
- 21 —Å—Ç—Ä–∞–Ω–∏—Ü–∞: –≥–ª–∞–≤–Ω–∞—è, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è, OAuth callback, –ø–µ—Ä—Å–æ–Ω–∞–∂ (—Å —Ä–∞–∑–º—ã—Ç—ã–º —Ñ–æ–Ω–æ–º –∞–≤–∞—Ç–∞—Ä–∞), —á–∞—Ç, —Å–æ–∑–¥–∞–Ω–∏–µ (—Ä—É—á–Ω–æ–µ + –∏–∑ —Ç–µ–∫—Å—Ç–∞ + –∏–º–ø–æ—Ä—Ç), —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ—Ñ–∏–ª—å, **–∏–∑–±—Ä–∞–Ω–Ω–æ–µ**, **–∞–¥–º–∏–Ω-–ø—Ä–æ–º–ø—Ç—ã**, **–∞–¥–º–∏–Ω-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**, **–∞–¥–º–∏–Ω-–∂–∞–ª–æ–±—ã**, **–∞–¥–º–∏–Ω-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞**, **–æ –ø—Ä–æ–µ–∫—Ç–µ**, **—É—Å–ª–æ–≤–∏—è**, **–∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å**, **FAQ**
- **–ë—Ä–µ–Ω–¥–∏–Ω–≥**: –ª–æ–≥–æ—Ç–∏–ø Sweet+Sin —Å SVG-–∏–∫–æ–Ω–∫–æ–π —Å–µ—Ä–¥—Ü–∞ (–¥—å—è–≤–æ–ª—å—Å–∫–∏–µ —Ä–æ–∂–∫–∏/—Ö–≤–æ—Å—Ç), SEO –º–µ—Ç–∞-—Ç–µ–≥–∏, Open Graph
- **Landing page (hero section)** ‚Äî –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö: –±–æ–ª—å—à–æ–π –ª–æ–≥–æ—Ç–∏–ø, —Å–ª–æ–≥–∞–Ω, **—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏/—Å–æ–æ–±—â–µ–Ω–∏—è/–æ–Ω–ª–∞–π–Ω), 2 CTA-–∫–Ω–æ–ø–∫–∏, –∞–≤–∞—Ç–∞—Ä—ã –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π, 4 feature-–∫–∞—Ä—Ç–æ—á–∫–∏. Gradient-—Ñ–æ–Ω rose-950/30. –î–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö ‚Äî —Ç–æ–ª—å–∫–æ –∫–∞—Ç–∞–ª–æ–≥
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥–µ** ‚Äî `GET /api/stats` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç users (+1200), messages (+45000), characters, online_now (15‚Äì45, pseudo-random stable per 5-min window)
- **Footer** ‚Äî —Å—Å—ã–ª–∫–∏ –Ω–∞ –û –ø—Ä–æ–µ–∫—Ç–µ, –£—Å–ª–æ–≤–∏—è, –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å, FAQ, –∫–æ–Ω—Ç–∞–∫—Ç (support@sweetsin.cc), copyright. –ü—Ä–∏–∂–∞—Ç –∫ –Ω–∏–∑—É —á–µ—Ä–µ–∑ min-h-full flex. **–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏** ‚Äî 8 —Ç–æ–ø-–ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∫–∞–∫ —Å—Å—ã–ª–∫–∏ (SEO internal linking, module-level –∫–µ—à)
- **–û–Ω–ª–∞–π–Ω-—Ç–æ—á–∫–∏** ‚Äî –∑–µ–ª—ë–Ω–∞—è —Ç–æ—á–∫–∞ –Ω–∞ –∞–≤–∞—Ç–∞—Ä–∞—Ö –≤—Å–µ—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π (–≤—Å–µ–≥–¥–∞ online). –ù–∞ CharacterCard –∏ CharacterPage
- **–§–∏–ª—å—Ç—Ä—ã –ø–æ —Ç–µ–≥–∞–º** ‚Äî –ø–∏–ª–ª—ã (–í—Å–µ / –§—ç–Ω—Ç–µ–∑–∏ / –†–æ–º–∞–Ω—Ç–∏–∫–∞ / –°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å / –ê–Ω–∏–º–µ) –Ω–∞–¥ –ø–æ–∏—Å–∫–æ–º –Ω–∞ –≥–ª–∞–≤–Ω–æ–π. –ò—Å–ø–æ–ª—å–∑—É—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π backend `tag` query param
- **–ü–µ—Ä—Å–æ–Ω–∞–∂ –¥–Ω—è** ‚Äî gradient-–±–∞–Ω–Ω–µ—Ä –º–µ–∂–¥—É —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ –≥—Ä–∏–¥–æ–º. `characters[daysSinceEpoch % count]`, –º–µ–Ω—è–µ—Ç—Å—è —Ä–∞–∑ –≤ –¥–µ–Ω—å. –°–∫—Ä—ã—Ç –ø—Ä–∏ –ø–æ–∏—Å–∫–µ/—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** ‚Äî –û –ø—Ä–æ–µ–∫—Ç–µ (`/about`), –£—Å–ª–æ–≤–∏—è (`/terms`), –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å (`/privacy`), FAQ (`/faq`). –î–≤—É—è–∑—ã—á–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç —á–µ—Ä–µ–∑ i18n
- **Scroll to top** ‚Äî –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ –∫–æ–Ω—Ç–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç—Å—è –≤–≤–µ—Ä—Ö (—á–µ—Ä–µ–∑ `useRef` + `useEffect` –Ω–∞ `pathname`)
- –°—Ç—Ä–∏–º–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –í—ã–±–æ—Ä AI-–º–æ–¥–µ–ª–∏: **Auto (–≤—Å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã)** / OpenRouter / Groq / Cerebras / Together (—Å –æ—Ü–µ–Ω–∫–∞–º–∏) + DeepSeek + Qwen + –ø–ª–∞—Ç–Ω—ã–µ
- **NSFW-–º–æ–¥–µ–ª–∏ –≤–∏–∑—É–∞–ª—å–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω—ã** –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –¥–ª—è NSFW-–ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ Cerebras** ‚Äî –∂—ë–ª—Ç–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∫–µ penalty
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (–º–æ–¥–∞–ª–∫–∞ —Å –º–æ–¥–µ–ª—å—é + 6 —Å–ª–∞–π–¥–µ—Ä–æ–≤ + –ø–∞–º—è—Ç—å)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏: —É–¥–∞–ª–µ–Ω–∏–µ, –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è, –æ—á–∏—Å—Ç–∫–∞ —á–∞—Ç–∞ (–∫–Ω–æ–ø–∫–∞ RotateCcw –≤ —à–∞–ø–∫–µ)
- **–ö—Ä–∞—Å–∏–≤—ã–µ –¥–∏–∞–ª–æ–≥–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è** ‚Äî ConfirmDialog (danger/warning) –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —á–∞—Ç–∞, –æ—á–∏—Å—Ç–∫–∏, —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è, —É–¥–∞–ª–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- **–ú–æ–±–∏–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏** ‚Äî –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ —Ç—Ä–æ–µ—Ç–æ—á–∏–µ (‚ãÆ) –≤–º–µ—Å—Ç–æ hover-–∫–Ω–æ–ø–æ–∫, dropdown-–º–µ–Ω—é
- **–î–∏–∑–∞–π–Ω —Å–æ–æ–±—â–µ–Ω–∏–π** ‚Äî header row (–∞–≤–∞—Ç–∞—Ä + –∏–º—è + –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π) –Ω–∞–¥ –±–∞–±–ª–æ–º, –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ Render (wake-up) —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º —Å—Ç–∞—Ç—É—Å–∞
- **–ü—Ä–æ—Ñ–∏–ª—å**: —Å–º–µ–Ω–∞ display name, username (—Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π), —è–∑—ã–∫–∞, –∞–≤–∞—Ç–∞—Ä, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (—Å–æ–æ–±—â–µ–Ω–∏—è + —á–∞—Ç—ã), —É–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ (danger zone —Å ConfirmDialog)
- **–ü–µ—Ä–µ–≤–æ–¥ –æ—à–∏–±–æ–∫ –±—ç–∫–µ–Ω–¥–∞** ‚Äî `ERROR_MAP` –≤ AuthPage –º–∞–ø–ø–∏—Ç –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –Ω–∞ i18n-–∫–ª—é—á–∏ (emailTaken, usernameTaken, invalidCredentials, usernameInvalid, banned, tooManyRequests)
- **Age gate (18+)** ‚Äî –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π —Å backdrop blur –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤ localStorage, –æ—Ç–∫–∞–∑ ‚Üí google.com
- **Cookie consent** ‚Äî –±–∞–Ω–Ω–µ—Ä –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞ —Å –∫–Ω–æ–ø–∫–æ–π ¬´–ü–æ–Ω—è—Ç–Ω–æ¬ª –∏ —Å—Å—ã–ª–∫–æ–π –Ω–∞ Privacy Policy, localStorage, i18n (en/ru/es)
- **Toast notifications** ‚Äî react-hot-toast (bottom-center, dark theme neutral-800). –¢–æ—Å—Ç—ã –ø—Ä–∏: like/unlike, delete, copy message, report, import, –æ—à–∏–±–∫–∞—Ö
- **Skeleton loading** ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Å–∫–µ–ª–µ—Ç–æ–Ω—ã –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π (–∞–≤–∞—Ç–∞—Ä-–∫—Ä—É–≥ + –ª–∏–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞ + —Ç–µ–≥–∏), —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –∏ —á–∞—Ç–∞
- **PWA (Progressive Web App)** ‚Äî vite-plugin-pwa, manifest (standalone, theme #171717), service worker —Å NetworkFirst –¥–ª—è `/api/`, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –¥–æ–º–∞—à–Ω–∏–π —ç–∫—Ä–∞–Ω
- **Open Graph / SEO** ‚Äî og:image (1200√ó630), og:url, og:type, twitter:card/title/description/image –º–µ—Ç–∞-—Ç–µ–≥–∏
- **RSS —Ñ–∏–¥** ‚Äî `/feed.xml` (RSS 2.0, 30 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π —Å –∞–≤–∞—Ç–∞—Ä–∞–º–∏). `<link rel="alternate">` –≤ HTML
- **JSON-LD Organization** ‚Äî –Ω–∞ –≥–ª–∞–≤–Ω–æ–π (@graph —Å WebSite)
- **WhatsApp —à–µ—Ä** ‚Äî –∫–Ω–æ–ø–∫–∞ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –≤ WhatsApp –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- **Native Web Share API** ‚Äî –º–æ–±–∏–ª—å–Ω—ã–π share-–¥–∏–∞–ª–æ–≥ (navigator.share) –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤—ë—Ä—Å—Ç–∫–∞**: –º–æ–±–∏–ª—å–Ω—ã–π sidebar-drawer (hamburger + backdrop), responsive padding, responsive message bubbles (85%/75%), compact chat input

### Performance –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- React.memo –Ω–∞ CharacterCard, explicit width/height –Ω–∞ Avatar (CLS prevention)
- Request dedup + stale-while-revalidate –≤ chatStore
- Skeleton loading –≤ Sidebar
- useMemo –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —á–∞—Ç–æ–≤
- **Code splitting** ‚Äî React.lazy –¥–ª—è 11 —Ç—è–∂—ë–ª—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (Chat, Admin, Create, Profile –∏ –¥—Ä.), Suspense fallback=null
- **Inter font** ‚Äî Google Fonts —Å preconnect, Tailwind fontFamily.sans

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **Anti-bot –∑–∞—â–∏—Ç–∞** (–±–µ–∑ CAPTCHA, 5 —Å–ª–æ—ë–≤):
  - **Honeypot** ‚Äî —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ `website` –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –±–æ—Ç—ã –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω—è—é—Ç ‚Üí 400
  - **Proof-of-Work** ‚Äî `GET /api/auth/challenge` ‚Üí –∫–ª–∏–µ–Ω—Ç —Ä–µ—à–∞–µ—Ç SHA256 puzzle (difficulty=4, ~100ms –≤ –±—Ä–∞—É–∑–µ—Ä–µ) ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ—à–µ–Ω–∏–µ —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π. `backend/app/auth/pow.py`, `frontend/src/lib/pow.ts`
  - **Rate limit —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏** ‚Äî 3 —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ —á–∞—Å –Ω–∞ IP
  - **–ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–æ–æ–±—â–µ–Ω–∏–π** ‚Äî –º–∏–Ω–∏–º—É–º 5—Å –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - **–í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤** ‚Äî 2—Å –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –±–µ–∑ Accept-Language –∏–ª–∏ Referer
- **Rate limiting** ‚Äî in-memory (–±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π):
  - Auth (login/register): 10 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω –Ω–∞ IP
  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: 3/—á–∞—Å –Ω–∞ IP (–∞–Ω—Ç–∏-—Å–ø–∞–º –±–æ—Ç–æ–≤)
  - –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è: 3/5–º–∏–Ω –Ω–∞ IP + 10/—á–∞—Å –Ω–∞ IP (–∞–Ω—Ç–∏-–ø–µ—Ä–µ–±–æ—Ä email) + 1/2–º–∏–Ω –Ω–∞ email (–∞–Ω—Ç–∏-—Å–ø–∞–º)
  - –°–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞: 20/–º–∏–Ω –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è + –º–∏–Ω–∏–º—É–º 5—Å –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- **Input validation** ‚Äî Pydantic `Field(max_length=...)` –Ω–∞ –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (schemas)
- **Mass assignment protection** ‚Äî allowlists (`_ALLOWED_FIELDS`) –¥–ª—è `setattr` –≤ characters –∏ users
- **ILIKE injection** ‚Äî —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ `%`, `_`, `\` –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- **HTML sanitization** ‚Äî `strip_html_tags()` –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—è—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏ –ø—Ä–æ—Ñ–∏–ª—è
- **Private character access control** ‚Äî `GET /characters/{id}` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `is_public` –¥–ª—è –Ω–µ-–≤–ª–∞–¥–µ–ª—å—Ü–µ–≤
- **JWT production check** ‚Äî –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—É—Å–∫ —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º —Å–µ–∫—Ä–µ—Ç–æ–º –≤ production
- **SSL certificate verification** ‚Äî –≤–∫–ª—é—á–µ–Ω–∞ –¥–ª—è Supabase (CERT_REQUIRED, check_hostname=False –¥–ª—è Supabase pooler)
- **CORS** ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã `allow_methods` –∏ `allow_headers` (–≤–º–µ—Å—Ç–æ `*`); `CORS_ORIGINS` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `*`, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ env
- **Avatar URL validation** ‚Äî –±–ª–æ–∫–∏—Ä—É–µ—Ç `javascript:` –∏ `data:` URI (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥), –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–æ–ª—å–∫–æ `https://` –∏ `/api/uploads/`
- **Avatar upload security** ‚Äî magic bytes –ø—Ä–æ–≤–µ—Ä–∫–∞, Pillow –≤–∞–ª–∏–¥–∞—Ü–∏—è, UUID-–∏–º–µ–Ω–∞, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –ª–∏–º–∏—Ç (MAX_AVATAR_SIZE, –¥–µ—Ñ–æ–ª—Ç 4 –ú–ë), WebP-–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
- **Age gate (18+)** ‚Äî –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤–æ–∑—Ä–∞—Å—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage
- **SSE safety** ‚Äî `JSON.parse` –≤ try/catch, localStorage –≤ try/catch

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- SQLAlchemy ORM (SQLite –ª–æ–∫–∞–ª—å–Ω–æ / PostgreSQL –≤ –ø—Ä–æ–¥–µ)
- –ê–≤—Ç–æ-–º–∏–≥—Ä–∞—Ü–∏–∏: `ALTER TABLE ... ADD COLUMN IF NOT EXISTS` –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (–æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)
- SSL –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Supabase (CERT_REQUIRED, check_hostname=False –¥–ª—è pooler)
- **–§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** ‚Äî `data/uploads/` —Å Docker volume, nginx —Ä–∞–∑–¥–∞—á–∞ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **Docker Compose** ‚Äî –ø–æ–ª–Ω—ã–π VPS-–¥–µ–ø–ª–æ–π (PostgreSQL + Backend + Nginx + Webhook)
- **Multi-stage Docker build** ‚Äî frontend —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –≤ node:20, nginx.conf baked –≤ –æ–±—Ä–∞–∑ (–Ω–µ volume mount)
- **GitHub Webhook** ‚Äî –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π –ø—Ä–∏ push –≤ main (Flask –Ω–∞ –ø–æ—Ä—Ç—É 9000), tracking —Å—Ç–∞—Ç—É—Å–∞ (done/failed/timeout)
- **Zero-downtime deploy** ‚Äî build ‚Üí restart backend ‚Üí health check (–¥–æ 60—Å) ‚Üí restart nginx
- **Same-path mount** ‚Äî webhook –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–Ω—Ç–∏—Ä—É–µ—Ç —Ä–µ–ø–æ –ø–æ `HOST_REPO_DIR:HOST_REPO_DIR`, —á—Ç–æ–±—ã Docker daemon –≤–∏–¥–µ–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø—É—Ç–∏ –¥–ª—è build context –∏ volumes
- **Health endpoints** ‚Äî `/api/health` –∏ `:9000/health` —Å commit hash, started_at, last_deploy
- **setup.sh** ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ Ubuntu VPS (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π + `--auto` —Ä–µ–∂–∏–º —Å –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º `.env`), –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ email (Resend/SMTP), ADMIN_EMAILS, –∞–≤—Ç–æ-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ FRONTEND_URL
- **SSL** ‚Äî Certbot (Let's Encrypt), –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è sweetsin.cc, –∞–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ cron
- **WEB_WORKERS** ‚Äî –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –∫–æ–ª-–≤–æ gunicorn workers —á–µ—Ä–µ–∑ env (–¥–µ—Ñ–æ–ª—Ç 2, –¥–ª—è 888MB RAM –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 1)
- **GeoIP DB –≤ Dockerfile** ‚Äî DB-IP Lite Country —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ docker build, –∞–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 30 –¥–Ω–µ–π
- render.yaml + vercel.json –¥–ª—è –æ–±–ª–∞—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è
- –ü—Ä–æ–∫—Å–∏ –¥–ª—è –æ–±—Ö–æ–¥–∞ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π API

## –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- [x] ~~–ù–∞—Å—Ç—Ä–æ–∏—Ç—å email (Resend API + SMTP + console fallback)~~
- [x] ~~–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –º–µ—Ç–∞-—Ç–µ–≥–∏ (og:image ‚Äî preview card –¥–ª—è —à–∞—Ä–∏–Ω–≥–∞)~~
- [x] ~~–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è/—Ç–æ—Å—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –∏ —É—Å–ø–µ—Ö–∞—Ö~~
- [x] ~~–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —á–∞—Ç—ã —Å –æ–¥–Ω–∏–º –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º~~
- [x] ~~OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (Google)~~
- [x] ~~–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤ —Å –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –º–æ–¥–µ–ª—è—Ö (RU/EN/ES ‚Äî –≤—Å–µ 4 –º–æ–¥–µ–ª–∏ 100%)~~
- [x] ~~Anti-bot –∑–∞—â–∏—Ç–∞ (honeypot + PoW + rate limit + message interval + header delay)~~
- [ ] SEO –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ (—Å–º. `SEO.md`)

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- [x] ~~–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (daily character gen + counter growth + cleanup)~~
- [ ] –ë–æ–ª—å—à–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ–≥–æ–≤ (—Ä–∞—Å—à–∏—Ä–∏—Ç—å —Ä–µ–µ—Å—Ç—Ä, –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
- [x] ~~–ü–µ—Ä–µ–≤–æ–¥ –æ–ø–∏—Å–∞–Ω–∏–π –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π —Ü–µ–ª–∏–∫–æ–º (personality, scenario, appearance, greeting) ‚Äî personality –¥–æ–±–∞–≤–ª–µ–Ω~~
- [ ] –í—ã–±–æ—Ä –ø–µ—Ä—Å–æ–Ω—ã –≤ UI —á–∞—Ç–∞ (—Å–µ–π—á–∞—Å —Ç–æ–ª—å–∫–æ API)
- [ ] OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (GitHub, Discord)

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–±—É–¥—É—â–µ–µ)
- [x] ~~–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (—Ç—Ä–∞—Ñ–∏–∫, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –ø–µ—Ä—Å–æ–Ω–∞–∂–∏, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –º–æ–¥–µ–ª–∏) ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –¥–∞—à–±–æ—Ä–¥~~
- [ ] WebSocket –≤–º–µ—Å—Ç–æ SSE –¥–ª—è –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –æ–±—â–µ–Ω–∏—è
- [ ] –ì—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã (–Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π)
- [ ] –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (TTS)
- [ ] –°–∏—Å—Ç–µ–º–∞ –æ—Ç–∑—ã–≤–æ–≤/—Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- [ ] –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è (–ø–æ–¥–ø–∏—Å–∫–∞, —Ç–æ–∫–µ–Ω—ã)

## –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

```
Backend:  Python 3.12 + FastAPI + SQLAlchemy + PyJWT + bcrypt + Pillow + authlib + gunicorn + uvicorn
Frontend: React 18 + TypeScript + Vite + Tailwind CSS + Zustand + i18next (EN/ES/RU) + react-markdown + react-hot-toast + vite-plugin-pwa
Database: PostgreSQL 16 (Docker) / Supabase (–æ–±–ª–∞–∫–æ) / SQLite (–ª–æ–∫–∞–ª—å–Ω–æ)
AI:       OpenRouter + Groq + Cerebras + Together + DeepSeek + Qwen/DashScope + Anthropic + OpenAI + Google GenAI
Streaming: SSE (Server-Sent Events)
Deploy:   Docker Compose (VPS) / Vercel + Render + Supabase (–æ–±–ª–∞–∫–æ)
CI/CD:    GitHub Webhook (auto-deploy on push to main)
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
chatbot/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py                  # FastAPI, CORS, lifespan
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py                # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ env
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/                    # JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è + OAuth + —Ä–æ–ª–∏ + rate limiting + anti-bot
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ router.py            # register, login, forgot/reset-password, Google OAuth, PoW challenge
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pow.py               # Proof-of-Work challenge (SHA256, difficulty=4)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware.py        # get_current_user (—Å role), get_current_user_optional
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ rate_limit.py        # In-memory rate limiter (auth, register, messages, interval, reset)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/                   # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ router.py            # CRUD –ø—Ä–æ–º–ø—Ç-—à–∞–±–ª–æ–Ω–æ–≤ + seed import/delete + cleanup-avatars + users list/ban/unban/delete (admin only)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ seed_data.py         # 40 seed-–ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ seed_avatars/        # 40 DALL-E 3 –∞–≤–∞—Ç–∞—Ä–æ–≤ (00‚Äì39.webp, 512√ó512)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ characters/              # CRUD + –≥–µ–Ω–µ—Ä–∞—Ü–∏—è + —Ç–µ–≥–∏ + –ø–µ—Ä–µ–≤–æ–¥ + —ç–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ router.py            # API endpoints (admin bypass) + GET /structured-tags + export/import
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ export_import.py     # SillyTavern character card v1/v2 export/import
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service.py           # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (is_admin, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas.py           # Pydantic –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ serializers.py       # ORM ‚Üí dict (username, active_translations)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ translation.py       # Batch-–ø–µ—Ä–µ–≤–æ–¥ –∫–∞—Ä—Ç–æ—á–µ–∫ + per-field plain text –ø–µ—Ä–µ–≤–æ–¥ –æ–ø–∏—Å–∞–Ω–∏–π (personality, scenario, appearance, greeting) + JSONB –∫—ç—à
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ structured_tags.py   # –†–µ–µ—Å—Ç—Ä 33 —Ç–µ–≥–æ–≤ √ó 5 –∫–∞—Ç–µ–≥–æ—Ä–∏–π (—Å –ø—Ä–æ–º–ø—Ç-—Å–Ω–∏–ø–ø–µ—Ç–∞–º–∏ ru/en)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat/                    # SSE —Å—Ç—Ä–∏–º–∏–Ω–≥, –∫–æ–Ω—Ç–µ–∫—Å—Ç, —Å—á—ë—Ç—á–∏–∫–∏, –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —á–∞—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ router.py            # send_message (SSE + model_used + message count), delete, clear
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service.py           # –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –æ–∫–Ω–æ, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, increment_message_count, force_new
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas.py           # SendMessageRequest (model, temp, top_p, is_regenerate), CreateChatRequest (force_new)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ prompt_builder.py    # Defaults + DB overrides, 21 –∫–ª—é—á √ó ru/en/es, –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å –ø—Ä–∏–º–µ—Ä–æ–º, 60s cache, anti-repetition rules
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ llm/                     # 9 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ + —Ä–µ–µ—Å—Ç—Ä + –º–æ–¥–µ–ª–∏ + –∫—É–ª–¥–∞—É–Ω
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.py              # BaseLLMProvider, LLMConfig (+ content_rating)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ registry.py          # init_providers + get_provider
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ model_cooldown.py    # 15-–º–∏–Ω –∫—É–ª–¥–∞—É–Ω –¥–ª—è –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ openrouter_provider.py  # OpenRouter (auto-fallback, last_model_used)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ openrouter_models.py    # –†–µ–µ—Å—Ç—Ä –º–æ–¥–µ–ª–µ–π —Å quality + nsfw
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ groq_provider.py        # Groq (auto-fallback, last_model_used)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ groq_models.py          # –†–µ–µ—Å—Ç—Ä –º–æ–¥–µ–ª–µ–π Groq + NSFW_BLOCKED
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cerebras_provider.py    # Cerebras (auto-fallback, last_model_used)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cerebras_models.py      # –†–µ–µ—Å—Ç—Ä –º–æ–¥–µ–ª–µ–π Cerebras + NSFW_BLOCKED
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ together_provider.py     # Together AI (auto-fallback, –ø–ª–∞—Ç–Ω—ã–π, –±–µ–∑ –º–æ–¥–µ—Ä–∞—Ü–∏–∏)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ together_models.py       # –†–µ–µ—Å—Ç—Ä –º–æ–¥–µ–ª–µ–π Together (7+ –º–æ–¥–µ–ª–µ–π, quality scores)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deepseek_provider.py    # DeepSeek –ø—Ä—è–º–æ–π API
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ qwen_provider.py        # Qwen/DashScope + –º–æ–¥–µ—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ anthropic_provider.py   # Claude
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ openai_provider.py      # GPT-4o
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gemini_provider.py      # Gemini
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ thinking_filter.py      # ThinkingFilter –¥–ª—è <think> –±–ª–æ–∫–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ router.py              # GET /api/models/{openrouter,groq,cerebras,together}
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ personas/                # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–µ—Ä—Å–æ–Ω—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ router.py            # CRUD (–¥–æ 10 –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schemas.py           # PersonaCreate, PersonaUpdate
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reports/                 # –°–∏—Å—Ç–µ–º–∞ –∂–∞–ª–æ–±
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ router.py            # POST /characters/{id}/report, GET/PUT /admin/reports
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schemas.py           # CreateReportRequest, UpdateReportRequest
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ uploads/                 # –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ (–∞–≤–∞—Ç–∞—Ä—ã)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ router.py            # POST /api/upload/avatar (Pillow, magic bytes, WebP)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users/                   # –ü—Ä–æ—Ñ–∏–ª—å (username, stats: message_count/chat_count), –∏–∑–±—Ä–∞–Ω–Ω–æ–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics/               # –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ router.py            # POST /api/analytics/pageview + GET /api/admin/analytics/overview
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ collector.py         # IP-—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ, device detection, async –∑–∞–ø–∏—Å—å page views
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schemas.py           # PageViewRequest
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ autonomous/              # –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–±–µ–∑ cron/Celery)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ scheduler.py         # Hourly check loop, state –≤ prompt_templates
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ character_generator.py # ~50 –∞—Ä—Ö–µ—Ç–∏–ø–æ–≤ + LLM + DALL-E –∞–≤–∞—Ç–∞—Ä + –ø–µ—Ä–µ–≤–æ–¥
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ counter_growth.py    # –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π bump base_chat/like_count
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ cleanup.py           # page_views >90 –¥–Ω–µ–π, orphan avatars
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stats/                   # –ü—É–±–ª–∏—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ router.py            # GET /api/stats (users, messages, characters, online_now)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/                   # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sanitize.py          # HTML strip_tags (defense-in-depth)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ email.py             # Async email sender (Resend API ‚Üí SMTP ‚Üí console fallback)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ db/                      # –ú–æ–¥–µ–ª–∏, —Å–µ—Å—Å–∏–∏, –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ models.py            # User (is_banned, oauth_provider, oauth_id), Character, Chat (persona_id), Message, Favorite, Persona, PromptTemplate, Report
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ session.py           # Engine, init_db + auto-migrations
‚îÇ   ‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ generate_seed_avatars.py # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–≤–∞—Ç–∞—Ä–æ–≤ —á–µ—Ä–µ–∑ DALL-E 3
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                   # gunicorn + uvicorn workers
‚îÇ   ‚îî‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/                     # HTTP –∫–ª–∏–µ–Ω—Ç, API —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ client.ts            # Axios —Å JWT
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.ts             # –ü—Ä–æ–º–ø—Ç-—à–∞–±–ª–æ–Ω—ã + seed import/delete + cleanup + users list/ban/unban/delete (admin)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ characters.ts        # CRUD + generate + wake-up + models
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.ts             # Profile (username, role), deleteAccount
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ uploads.ts           # uploadAvatar (multipart)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat.ts              # chats, messages, delete, clear, forceNew
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reports.ts           # createReport, getReports, updateReport
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ export.ts            # getExportUrl, importCharacter (SillyTavern)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ stats.ts             # fetchStats() ‚Äî –ø—É–±–ª–∏—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useAuth.ts           # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useChat.ts           # SSE —Å—Ç—Ä–∏–º–∏–Ω–≥ + GenerationSettings + model_used + is_regenerate
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ store/                   # Zustand (auth —Å role, chat, favorites)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/                   # 20 —Å—Ç—Ä–∞–Ω–∏—Ü
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthPage.tsx         # –í—Ö–æ–¥ / —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è / –∑–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å + Google OAuth
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ OAuthCallbackPage.tsx # –û–±—Ä–∞–±–æ—Ç–∫–∞ OAuth redirect (token –∏–∑ URL ‚Üí store)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ResetPasswordPage.tsx # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—è (–ø–æ —Å—Å—ã–ª–∫–µ –∏–∑ email)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatPage.tsx         # –ß–∞—Ç + –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ + –º–æ–¥–µ–ª—å + isAdmin + –Ω–æ–≤—ã–π —á–∞—Ç
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FavoritesPage.tsx    # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminPromptsPage.tsx # –ê–¥–º–∏–Ω: —Ä–µ–¥–∞–∫—Ç–æ—Ä –ø—Ä–æ–º–ø—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminUsersPage.tsx   # –ê–¥–º–∏–Ω: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (ban/unban/delete)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminReportsPage.tsx # –ê–¥–º–∏–Ω: –∂–∞–ª–æ–±—ã (—Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É, review/dismiss)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CreateCharacterPage.tsx  # –°–æ–∑–¥–∞–Ω–∏–µ (—Ä—É—á–Ω–æ–µ + –∏–∑ —Ç–µ–∫—Å—Ç–∞ + –∏–º–ø–æ—Ä—Ç SillyTavern)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EditCharacterPage.tsx    # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AboutPage.tsx        # –û –ø—Ä–æ–µ–∫—Ç–µ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TermsPage.tsx        # –£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PrivacyPage.tsx      # –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FAQPage.tsx          # –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatWindow.tsx        # –°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π + –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è + isAdmin
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatInput.tsx         # –í–≤–æ–¥ + —Å—Ç–æ–ø
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MessageBubble.tsx     # –°–æ–æ–±—â–µ–Ω–∏–µ + delete + regenerate + copy + markdown + model_used (admin)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GenerationSettingsModal.tsx  # –ú–æ–¥–µ–ª—å (7 –≥—Ä—É–ø–ø) + 6 —Å–ª–∞–π–¥–µ—Ä–æ–≤ + –ø–∞–º—è—Ç—å
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ characters/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CharacterForm.tsx     # –§–æ—Ä–º–∞ (name, personality, structured tags pills, appearance, model, NSFW disable)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ReportModal.tsx       # –ú–æ–¥–∞–ª–∫–∞ –∂–∞–ª–æ–±—ã (5 –ø—Ä–∏—á–∏–Ω + –æ–ø–∏—Å–∞–Ω–∏–µ)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ landing/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ HeroSection.tsx        # Landing hero: –ª–æ–≥–æ—Ç–∏–ø, —Å–ª–æ–≥–∞–Ω, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, CTA, –∞–≤–∞—Ç–∞—Ä—ã, feature-–∫–∞—Ä—Ç–æ—á–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Footer.tsx            # –°—Å—ã–ª–∫–∏ –Ω–∞ About/Terms/Privacy/FAQ, –∫–æ–ø–∏—Ä–∞–π—Ç
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui/                       # Button, Input, Avatar, AvatarUpload, AgeGate, ConfirmDialog, LanguageSwitcher, Logo, Skeleton
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lib/                     # –£—Ç–∏–ª–∏—Ç—ã (localStorage —Å role, isCharacterOnline, PoW solver)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ locales/                 # i18n: en.json, es.json, ru.json (~391 –∫–ª—é—á–µ–π –∫–∞–∂–¥—ã–π)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ types/                   # TypeScript —Ç–∏–ø—ã (Message —Å model_used)
‚îÇ   ‚îú‚îÄ‚îÄ vercel.json
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ deploy/
‚îÇ   ‚îú‚îÄ‚îÄ setup.sh                     # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ VPS (--auto –¥–ª—è non-interactive)
‚îÇ   ‚îú‚îÄ‚îÄ deploy.sh                    # –ê–≤—Ç–æ–¥–µ–ø–ª–æ–π (git pull + rebuild)
‚îÇ   ‚îú‚îÄ‚îÄ nginx/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile               # Multi-stage: node build ‚Üí nginx serve
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nginx.conf               # Reverse proxy + SSE support
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ certs/                   # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (gitignored)
‚îÇ   ‚îî‚îÄ‚îÄ webhook/
‚îÇ       ‚îú‚îÄ‚îÄ Dockerfile               # Python + docker CLI + docker compose v2 + buildx
‚îÇ       ‚îú‚îÄ‚îÄ server.py                # Flask webhook server (HOST_REPO_DIR aware)
‚îÇ       ‚îî‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ wdio_bot.py                  # WetDreams.io auto-chat bot (Playwright + Groq LLM)
‚îÇ   ‚îú‚îÄ‚îÄ WD.md                        # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ CLAUDE.md                    # Claude Code –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ MEMORY.md                    # –ó–∞–º–µ—Ç–∫–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ CURRENT_STAGE.md             # –°—Ç–∞—Ç—É—Å –∏ changelog
‚îú‚îÄ‚îÄ docker-compose.yml               # PostgreSQL + Backend + Nginx + Webhook + uploads volume
‚îú‚îÄ‚îÄ .env.example                     # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (cp ‚Üí .env ‚Üí nano ‚Üí setup --auto)
‚îú‚îÄ‚îÄ render.yaml
‚îú‚îÄ‚îÄ CLAUDE.md
‚îî‚îÄ‚îÄ CURRENT_STAGE.md
```
